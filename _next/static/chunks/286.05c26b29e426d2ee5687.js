"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{40286:function(t,n,e){e.r(n),e.d(n,{default:function(){return P}});var r=e(52209),i=e(92809),o=e(30266),a=e(79056),c=e(809),l=e.n(c),s=e(59748),u=e(88269),p=e(88767),d=e(35490),f=e(48103),g=e(68451),v=e(96005),h=e(91441),y=e(83159),E=e(12891),b=e(8311);function m(t){var n=s.default.useState((function(){return{pathEl:{},path:[]}})),e=(0,a.Z)(n,1)[0];return s.default.useEffect((function(){t.api({setPath:function(t){e.path=t,e.pathEl.setAttribute("points","".concat(e.path))}})}),[]),(0,b.BX)("g",{ref:function(t){t&&(e.pathEl=t.querySelector("polyline.navpath"))},children:[(0,b.tZ)("polyline",{className:"navpath"}),(0,b.tZ)(E.Z,{initial:t.initial.src,radius:t.radius,icon:t.srcIcon,onStart:function(){var n;return null===(n=t.onStart)||void 0===n?void 0:n.call(t,"src")},onStop:function(n){var e;return null===(e=t.onStop)||void 0===e?void 0:e.call(t,n,"src")}}),(0,b.tZ)(E.Z,{initial:t.initial.dst,radius:t.radius,icon:t.dstIcon,onStart:function(){var n;return null===(n=t.onStart)||void 0===n?void 0:n.call(t,"dst")},onStop:function(n){var e;return null===(e=t.onStop)||void 0===e?void 0:e.call(t,n,"dst")}})]})}var w,O,x=e(94184),S=e.n(x);function Z(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(e),!0).forEach((function(n){(0,i.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Z(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function P(t){var n=s.default.useState((function(){return{source:new f.dl(300,300),target:new f.dl(600,300),path:[],pathApi:{},updatePath:function(){var t,n=r.getGroup(A,e.source);null!==n&&(e.path=[e.source.clone()].concat(r.findPath(e.source,e.target,A,n)||[]),null===(t=e.pathApi)||void 0===t||t.setPath(e.path))}}})),e=(0,a.Z)(n,1)[0],r=s.default.useMemo((function(){return new v.B}),[]),i=(0,p.useQuery)("nav-collide-demo",(0,o.Z)(l().mark((function t(){var n,i,o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,h.tU)("g-301--bridge")).then((function(t){return t.json()}));case 2:return n=t.sent,i=n.navPoly.map((function(t){return f.LA.from(t)})),o=g.J.polysToTriangulation(i),a=v.B.createZone(o),r.setZoneData(A,a),e.updatePath(),t.abrupt("return",{pngRect:n.pngRect,navPoly:i,zone:a});case 9:case"end":return t.stop()}}),t)})))).data;return(0,b.tZ)(y.Z,{gridBounds:d.l,initViewBox:L,maxZoom:6,children:(0,b.BX)("g",{className:S()(j,!t.disabled&&D),children:[i&&(0,b.BX)(b.HY,{children:[(0,b.tZ)("image",k(k({},i.pngRect),{},{className:"geomorph",href:(0,h.qX)("g-301--bridge")})),i.zone.groups.map((function(t){return t.map((function(t){var n=t.vertexIds;return(0,b.tZ)("polygon",{className:"navtri",points:"".concat(n.map((function(t){return i.zone.vertices[t]})))})}))}))]}),(0,b.tZ)(m,{api:function(t){return e.pathApi=t},initial:{src:e.source,dst:e.target},srcIcon:"run",radius:8,onStop:function(t,n){e["src"===n?"source":"target"].copy(t),e.updatePath()}})]})})}var j=(0,u.iv)(w||(w=(0,r.Z)(["\n  border: 1px solid #555555;\n  height: inherit;\n\n  polyline.navpath {\n    fill: none;\n    stroke: #083;\n    stroke-width: 4;\n    stroke-dasharray: 8px;\n    stroke-dashoffset: 16px;\n  }\n\n  @keyframes flash {\n    0% { stroke-dashoffset: 16px; }\n    100% { stroke-dashoffset: 0px; }\n  }\n\n  polygon.navtri {\n    fill: transparent;\n    &:hover {\n      stroke: #900;\n    }\n  }\n"]))),D=(0,u.iv)(O||(O=(0,r.Z)(["\n  polyline.navpath {\n    animation: 600ms flash infinite linear;\n  }\n"]))),A="NavCollideZone",L=new f.UL(200,0,600,600)},12891:function(t,n,e){e.d(n,{Z:function(){return f}});var r,i=e(52209),o=e(92809),a=e(79056),c=e(88269),l=e(59748),s=e(48103),u=e(50269),p=e(8311);function d(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function f(t){var n=l.default.useState((function(){return{position:s.dl.from(t.initial),target:s.dl.from(t.initial),dragging:!1,rootEl:{},lineEl:{},circleEl:{},startDrag:function(n){var e;n.stopPropagation(),r.dragging=!0,r.lineEl.style.display="inline",r.target.copy(r.position),["x1","x2"].forEach((function(t){return r.lineEl.setAttribute(t,String(r.position.x))})),["y1","y2"].forEach((function(t){return r.lineEl.setAttribute(t,String(r.position.y))}));var i=r.lineEl.ownerSVGElement;i.addEventListener("pointermove",r.onMove),i.addEventListener("pointerleave",r.endDrag),i.addEventListener("pointerup",r.applyDrag),window.addEventListener("keydown",r.endDragOnEscape),i.style.cursor="grabbing",null===(e=t.onStart)||void 0===e||e.call(t)},onMove:function(t){if(t.stopPropagation(),r.dragging){var n=(0,u.zk)({clientX:t.clientX,clientY:t.clientY,ownerSvg:r.lineEl.ownerSVGElement,pointerId:null}),e=n.x,i=n.y;r.target.set(e,i),r.lineEl.setAttribute("x2",String(e)),r.lineEl.setAttribute("y2",String(i))}},endDrag:function(){r.dragging=!1,r.lineEl.style.display="none",r.lineEl.setAttribute("x2",r.lineEl.getAttribute("x1")),r.lineEl.setAttribute("y2",r.lineEl.getAttribute("y1"));var t=r.lineEl.ownerSVGElement;t.removeEventListener("pointermove",r.onMove),t.removeEventListener("pointerleave",r.endDrag),t.removeEventListener("pointerup",r.applyDrag),window.removeEventListener("keydown",r.endDragOnEscape),t.style.cursor="auto"},applyDrag:function(){var n;r.endDrag(),r.position.copy(r.target),r.lineEl.setAttribute("x1",String(r.target.x)),r.lineEl.setAttribute("y1",String(r.target.y)),i(function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?d(Object(e),!0).forEach((function(n){(0,o.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},r)),null===(n=t.onStop)||void 0===n||n.call(t,s.dl.from(r.position))},endDragOnEscape:function(t){"Escape"===t.key&&r.endDrag()}}})),e=(0,a.Z)(n,2),r=e[0],i=e[1],c=t.radius||10;return(0,p.BX)("g",{className:g,ref:function(t){t&&(r.rootEl=t,r.lineEl=t.querySelector("line.drag-indicator"),r.circleEl=t.querySelector("circle.node"),r.circleEl.addEventListener("pointerdown",r.startDrag),r.circleEl.addEventListener("pointerup",r.applyDrag))},children:[t.icon&&{eye:(0,p.tZ)("image",{href:"/icon/Simple_Icon_Eye.svg",width:"30",height:"30",x:r.position.x-15,y:r.position.y-15}),down:(0,p.tZ)("image",{href:"/icon/solid_arrow-circle-down.svg",width:"30",height:"30",x:r.position.x-15,y:r.position.y-15}),right:(0,p.tZ)("image",{href:"/icon/solid_arrow-circle-right.svg",width:"30",height:"30",x:r.position.x-15,y:r.position.y-15}),run:(0,p.tZ)("image",{href:"/icon/person-running-fa6.svg",width:"30",height:"30",x:r.position.x-15,y:r.position.y-15}),finish:(0,p.tZ)("image",{href:"/icon/flag-checkered-fa6.svg",width:"30",height:"30",x:r.position.x-15,y:r.position.y-15})}[t.icon]||(0,p.tZ)("circle",{className:"inner-node",cx:r.position.x,cy:r.position.y,r:c}),(0,p.tZ)("circle",{className:"node",cx:r.position.x,cy:r.position.y,r:c+20}),(0,p.tZ)("line",{className:"drag-indicator",stroke:t.stroke||"blue"})]})}var g=(0,c.iv)(r||(r=(0,i.Z)(["\n  circle.node {\n    fill: rgba(0, 0, 0, 0.2);\n    cursor: pointer;\n  }\n  circle.inner-node {\n    stroke: black;\n    cursor: pointer;\n    stroke-width: 0.5;\n  }\n  line.drag-indicator {\n    display: none;\n    stroke-width: 2.5;\n    user-select: none;\n    pointer-events: none;\n  }\n"])))}}]);