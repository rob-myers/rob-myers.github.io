"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7470],{97470:function(n,e,t){t.r(e),t.d(e,{default:function(){return Z}});var i,r,o=t(52209),a=t(92809),l=t(79056),c=t(59748),s=t(88269),p=t(94184),u=t.n(p),d=t(35490),g=t(48103),f=t(96005),v=t(91441),h=t(83159),y=t(12891),E=t(21225),m=t(21416),b=t(8311);function w(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function x(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?w(Object(t),!0).forEach((function(e){(0,a.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Z(n){var e="g-301--bridge",t=e,i=(0,E.Z)(e).data,r=(0,m.Z)(t,null===i||void 0===i?void 0:i.navDecomp,n.disabled).data,o=c.default.useState((function(){return{rootEl:{},pathEl:null,source:new g.dl(300,300),target:new g.dl(600,300),path:[],updatePath:function(){var n,e,i=f.k.getGroup(t,a.source);null!==i&&(a.path=[a.source.clone()].concat((null===(n=f.k.findPath(a.source,a.target,t,i))||void 0===n?void 0:n.path)||[]),a.pathEl=a.pathEl||a.rootEl.querySelector("polyline.navpath"),null===(e=a.pathEl)||void 0===e||e.setAttribute("points","".concat(a.path)))}}})),a=(0,l.Z)(o,1)[0];return(0,b.tZ)(h.Z,{gridBounds:d.l,initViewBox:O,maxZoom:6,children:(0,b.BX)("g",{className:u()(k,!n.disabled&&S),ref:function(n){n&&(a.rootEl=n,a.updatePath())},children:[i&&(0,b.tZ)("image",x(x({},i.pngRect),{},{className:"geomorph",href:(0,v.qX)(e)})),!n.disabled&&(null===r||void 0===r?void 0:r.zone.groups.map((function(n){return n.map((function(n){var e=n.vertexIds;return(0,b.tZ)("polygon",{className:"navtri",points:"".concat(e.map((function(n){return null===r||void 0===r?void 0:r.zone.vertices[n]})))})}))}))),i&&(0,b.BX)(b.HY,{children:[(0,b.tZ)(y.Z,{initial:a.source,icon:"run",onStop:function(n){if(!i.d.navPoly.some((function(e){return e.contains(n)})))return"cancel";a.source.copy(n),a.updatePath()}}),(0,b.tZ)("polyline",{className:"navpath",points:"".concat(a.path)}),(0,b.tZ)(y.Z,{initial:a.target,icon:"finish",onStop:function(n){if(!i.d.navPoly.some((function(e){return e.contains(n)})))return"cancel";a.target.copy(n),a.updatePath()}})]})]})})}var k=(0,s.iv)(i||(i=(0,o.Z)(["\n  border: 1px solid #555555;\n  height: inherit;\n\n  polyline.navpath {\n    fill: none;\n    stroke: #083;\n    stroke-width: 4;\n    stroke-dasharray: 8px;\n    stroke-dashoffset: 16px;\n  }\n\n  @keyframes stringPullFlash {\n    0% { stroke-dashoffset: 16px; }\n    100% { stroke-dashoffset: 0px; }\n  }\n\n  polygon.navtri {\n    fill: transparent;\n    &:hover {\n      stroke: #900;\n    }\n  }\n"]))),S=(0,s.iv)(r||(r=(0,o.Z)(["\n  polyline.navpath {\n    animation: 600ms stringPullFlash infinite linear;\n  }\n"]))),O=new g.UL(200,0,600,600)},12891:function(n,e,t){t.d(e,{Z:function(){return d}});var i,r=t(52209),o=t(79056),a=t(88269),l=t(59748),c=t(48103),s=t(50269),p=t(27375),u=t(8311);function d(n){var e=(0,p.Z)(),t=l.default.useState((function(){return{position:c.dl.from(n.initial),target:c.dl.from(n.initial),dragging:!1,rootEl:{},lineEl:{},circleEl:{},startDrag:function(e){var t;e.stopPropagation(),i.dragging=!0,i.lineEl.style.display="inline",i.target.copy(i.position),["x1","x2"].forEach((function(n){return i.lineEl.setAttribute(n,String(i.position.x))})),["y1","y2"].forEach((function(n){return i.lineEl.setAttribute(n,String(i.position.y))}));var r=i.lineEl.ownerSVGElement;r.addEventListener("pointermove",i.onMove),r.addEventListener("pointerleave",i.endDrag),r.addEventListener("pointerup",i.applyDrag),window.addEventListener("keydown",i.endDragOnEscape),r.style.cursor="grabbing",null===(t=n.onStart)||void 0===t||t.call(n)},onMove:function(n){if(n.stopPropagation(),i.dragging){var e=(0,s.zk)({clientX:n.clientX,clientY:n.clientY,ownerSvg:i.lineEl.ownerSVGElement,pointerId:null}),t=e.x,r=e.y;i.target.set(t,r),i.lineEl.setAttribute("x2",String(t)),i.lineEl.setAttribute("y2",String(r))}},endDrag:function(){i.dragging=!1,i.lineEl.style.display="none",i.lineEl.setAttribute("x2",i.lineEl.getAttribute("x1")),i.lineEl.setAttribute("y2",i.lineEl.getAttribute("y1"));var n=i.lineEl.ownerSVGElement;n.removeEventListener("pointermove",i.onMove),n.removeEventListener("pointerleave",i.endDrag),n.removeEventListener("pointerup",i.applyDrag),window.removeEventListener("keydown",i.endDragOnEscape),n.style.cursor="auto"},applyDrag:function(){var e;i.endDrag(),"cancel"===(null===(e=n.onStop)||void 0===e?void 0:e.call(n,c.dl.from(i.target)))||i.moveTo(i.target)},endDragOnEscape:function(n){"Escape"===n.key&&i.endDrag()},moveTo:function(n){i.position.copy(n),i.lineEl.setAttribute("x1",String(i.target.x)),i.lineEl.setAttribute("y1",String(i.target.y)),e()}}})),i=(0,o.Z)(t,1)[0];l.default.useEffect((function(){var e;null===(e=n.onLoad)||void 0===e||e.call(n,{moveTo:i.moveTo})}),[]);var r=n.radius||8;return(0,u.BX)("g",{className:g,ref:function(n){n&&(i.rootEl=n,i.lineEl=n.querySelector("line.drag-indicator"),i.circleEl=n.querySelector("circle.node"),i.circleEl.addEventListener("pointerdown",i.startDrag),i.circleEl.addEventListener("pointerup",i.applyDrag))},children:[n.icon&&{eye:(0,u.tZ)("image",{href:"/icon/Simple_Icon_Eye.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),down:(0,u.tZ)("image",{href:"/icon/solid_arrow-circle-down.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),right:(0,u.tZ)("image",{href:"/icon/solid_arrow-circle-right.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),run:(0,u.tZ)("image",{href:"/icon/person-running-fa6.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),finish:(0,u.tZ)("image",{href:"/icon/flag-checkered-fa6.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10})}[n.icon]||(0,u.tZ)("circle",{className:"inner-node",cx:i.position.x,cy:i.position.y,r:r}),(0,u.tZ)("circle",{className:"node",cx:i.position.x,cy:i.position.y,r:r+20}),(0,u.tZ)("line",{className:"drag-indicator",stroke:n.stroke||"blue"})]})}var g=(0,a.iv)(i||(i=(0,r.Z)(["\n  circle.node {\n    fill: rgba(0, 0, 100, 0.1);\n    stroke: rgba(0, 0, 100, 0.2);\n    cursor: pointer;\n  }\n  circle.inner-node {\n    stroke: black;\n    cursor: pointer;\n    stroke-width: 0.5;\n  }\n  line.drag-indicator {\n    display: none;\n    stroke-width: 2.5;\n    user-select: none;\n    pointer-events: none;\n  }\n"])))}}]);