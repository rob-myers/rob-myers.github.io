"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{97470:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var r,o=t(52209),a=t(92809),c=t(30266),i=t(809),s=t.n(i),u=t(59748),l=t(88269),p=t(88767),f=t(35490),d=t(48103),g=t(50269),h=t(68451),v=t(96005),y=t(91441),m=t(83159),b=t(8311);function w(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function O(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?w(Object(t),!0).forEach((function(e){(0,a.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function k(){var n=(0,u.useState)([]),e=n[0],t=n[1],r=(0,u.useState)([]),o=r[0],a=r[1],i=(0,u.useMemo)((function(){return new v.B}),[]),l="myZone",w=(0,u.useRef)(0),k=(0,p.useQuery)("navpoly-demo",(0,c.Z)(s().mark((function n(){var e,t,r,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch((0,y.tU)("g-301--bridge")).then((function(n){return n.json()}));case 2:return e=n.sent,t=e.navPoly.map((function(n){return d.LA.from(n)})),r=h.J.polysToTriangulation(t),o=v.B.createZone(r),i.setZoneData(l,o),n.abrupt("return",{pngRect:e.pngRect,navPoly:t,zone:o});case 8:case"end":return n.stop()}}),n)})))).data;return(0,u.useEffect)((function(){if(2===e.length){var n=i.getGroup(l,e[0]);null!==n&&a([e[0]].concat(i.findPath(e[0],e[1],l,n)||[]).map(d.dl.from))}else a([])}),[e]),(0,b.tZ)(m.Z,{gridBounds:f.l,initViewBox:f.r,maxZoom:6,children:(0,b.BX)("g",{className:Z,ref:function(n){n&&(n.addEventListener("pointerdown",(function(){w.current=Date.now()})),n.addEventListener("pointerup",(function(n){if(Date.now()-w.current<200){var r=(0,g.zk)((0,g.Xs)(n));t(e.slice(0,1).concat(r))}})))},children:[k&&(0,b.BX)(b.HY,{children:[(0,b.tZ)("image",O(O({},k.pngRect),{},{className:"geomorph",href:(0,y.qX)("g-301--bridge")})),k.navPoly.map((function(n){return(0,b.tZ)("path",{className:"navpoly",d:n.svgPath})})),k.zone.groups.map((function(n){return n.map((function(n){n.centroid;var e=n.vertexIds;return(0,b.tZ)("polygon",{className:"navtri",points:"".concat(e.map((function(n){return k.zone.vertices[n]})))})}))}))]}),(0,b.tZ)("polyline",{className:"navpath",points:"".concat(o)}),(0,b.tZ)("g",{className:"dots",children:e.map((function(n,r){return(0,b.tZ)("circle",{cx:n.x,cy:n.y,r:8,onClick:function(n){t(e.filter((function(n,e){return r!==e}))),n.stopPropagation()}},r)}))})]})})}var Z=(0,l.iv)(r||(r=(0,o.Z)(["\n  border: 1px solid #555555;\n  height: inherit;\n\n  > path.navpoly {\n    fill: rgba(0, 0, 0, 0.01);\n    stroke-width: 2;\n  }\n\n  > g.dots circle {\n    fill: white;\n    stroke: black;\n    stroke-width: 2;\n    cursor: pointer;\n  }\n\n  > polyline.navpath {\n    fill: none;\n    stroke: #00f;\n    stroke-width: 4;\n    stroke-dasharray: 20 10;\n  }\n\n  polygon.navtri {\n    fill: rgba(0, 0, 0, 0);\n    &:hover {\n      fill: rgba(0, 0, 0, 0.2);\n    }\n  }\n"])))}}]);