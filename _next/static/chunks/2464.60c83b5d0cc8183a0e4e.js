"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2464],{62464:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r,i,o=t(52209),a=t(92809),l=(t(59748),t(88269)),c=t(94184),s=t.n(c),p=t(35490),d=t(48103),u=t(91441),g=t(83159),v=t(90101),f=t(95814),y=t(19964),h=t(44275),E=t(8311);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function w(e){var n="g-301--bridge",t=(0,f.Z)(n).data,r=(0,y.Z)("g-301--bridge",null===t||void 0===t?void 0:t.navZone,e.disabled).data,i=(0,h.Z)((function(){return{rootEl:{},pathEl:null,source:new d.dl(300,300),target:new d.dl(600,300),path:[],updatePath:function(){var e,n;r&&(i.path=[i.source.clone()].concat((null===(e=r.graph.findPath(i.source,i.target))||void 0===e?void 0:e.path)||[]),i.pathEl=i.pathEl||i.rootEl.querySelector("polyline.navpath"),null===(n=i.pathEl)||void 0===n||n.setAttribute("points","".concat(i.path)))}}}),{deps:[r]});return(0,E.tZ)(g.Z,{gridBounds:p.l,initViewBox:p.r,maxZoom:6,children:(0,E.BX)("g",{className:s()(O,!e.disabled&&x),ref:function(e){e&&(i.rootEl=e,i.updatePath())},children:[t&&(0,E.tZ)("image",m(m({},t.pngRect),{},{className:"geomorph",href:(0,u.qX)(n)})),!e.disabled&&(null===r||void 0===r?void 0:r.graph.nodesArray.map((function(e){var n=e.vertexIds;return(0,E.tZ)("polygon",{className:"navtri",points:"".concat(n.map((function(e){return r.graph.vectors[e]})))})}))),t&&(0,E.BX)(E.HY,{children:[(0,E.tZ)(v.Z,{initial:i.source,icon:"run",onStop:function(e){if(!t.navPoly.some((function(n){return n.contains(e)})))return"cancel";i.source.copy(e),i.updatePath()}}),(0,E.tZ)("polyline",{className:"navpath",points:"".concat(i.path)}),(0,E.tZ)(v.Z,{initial:i.target,icon:"finish",onStop:function(e){if(!t.navPoly.some((function(n){return n.contains(e)})))return"cancel";i.target.copy(e),i.updatePath()}})]})]})})}var O=(0,l.iv)(r||(r=(0,o.Z)(["\n  border: 1px solid #555555;\n  height: inherit;\n\n  /* image.geomorph, image.icon {\n    filter: invert(100%);\n  } */\n\n  polyline.navpath {\n    fill: none;\n    stroke: #083;\n    stroke-width: 2;\n    stroke-dasharray: 8px;\n    stroke-dashoffset: 16px;\n  }\n\n  @keyframes stringPullFlash {\n    0% { stroke-dashoffset: 16px; }\n    100% { stroke-dashoffset: 0px; }\n  }\n\n  polygon.navtri {\n    fill: transparent;\n    &:hover {\n      stroke: red;\n    }\n  }\n"]))),x=(0,l.iv)(i||(i=(0,o.Z)(["\n  polyline.navpath {\n    animation: 600ms stringPullFlash infinite linear;\n  }\n"])))},90101:function(e,n,t){t.d(n,{Z:function(){return u}});var r,i=t(52209),o=t(79056),a=t(59748),l=t(88269),c=t(48103),s=t(50269),p=t(27375),d=t(8311);function u(e){var n=(0,p.Z)(),t=a.default.useState((function(){var t,i={position:c.dl.from(e.initial),target:c.dl.from(e.initial),dragging:!1,rootEl:{},lineEl:{},circleEl:{},rootRef:function(e){e&&(r.rootEl=e,r.lineEl=e.querySelector("line.drag-indicator"),r.circleEl=e.querySelector("circle.node"),r.circleEl.addEventListener("pointerdown",r.startDrag),r.circleEl.addEventListener("pointerup",r.applyDrag))},startDrag:function(n){var t;n.stopPropagation(),r.dragging=!0,r.lineEl.style.display="inline",r.target.copy(r.position),["x1","x2"].forEach((function(e){return r.lineEl.setAttribute(e,String(r.position.x))})),["y1","y2"].forEach((function(e){return r.lineEl.setAttribute(e,String(r.position.y))}));var i=r.lineEl.ownerSVGElement;i.addEventListener("pointermove",r.onMove),i.addEventListener("pointerleave",r.endDrag),i.addEventListener("pointerup",r.applyDrag),window.addEventListener("keydown",r.endDragOnEscape),i.style.cursor="grabbing",null===(t=e.onStart)||void 0===t||t.call(e)},onMove:function(e){if(e.stopPropagation(),r.dragging){var n=(0,s.zk)({clientX:e.clientX,clientY:e.clientY,ownerSvg:r.lineEl.ownerSVGElement,pointerId:null}),t=n.x,i=n.y,o=new c.dl(t,i);r.position.distanceTo(o)>=20&&(r.target.set(t,i),r.lineEl.setAttribute("x2",String(t)),r.lineEl.setAttribute("y2",String(i)))}},endDrag:function(){if(r.dragging){r.dragging=!1,r.lineEl.style.display="none",r.lineEl.setAttribute("x2",r.lineEl.getAttribute("x1")),r.lineEl.setAttribute("y2",r.lineEl.getAttribute("y1"));var e=r.lineEl.ownerSVGElement;e.removeEventListener("pointermove",r.onMove),e.removeEventListener("pointerleave",r.endDrag),e.removeEventListener("pointerup",r.applyDrag),window.removeEventListener("keydown",r.endDragOnEscape),e.style.cursor="auto"}},applyDrag:function(){var n,t,i;r.dragging&&(r.endDrag(),null!==(n=e.shouldCancel)&&void 0!==n&&n.call(e,r.position.clone(),r.target.clone())||(r.target.distanceTo(r.position)<20?null===(t=e.onClick)||void 0===t||t.call(e,r.position.clone()):(r.moveTo(r.target),null===(i=e.onStop)||void 0===i||i.call(e,r.target.clone()))))},endDragOnEscape:function(e){"Escape"===e.key&&r.endDrag()},moveTo:function(e){r.position.copy(e),r.lineEl.setAttribute("x1",String(r.target.x)),r.lineEl.setAttribute("y1",String(r.target.y)),n()}};return null===(t=e.onLoad)||void 0===t||t.call(e,{moveTo:i.moveTo,getPosition:function(){return r.position.clone()}}),i})),r=(0,o.Z)(t,1)[0],i=e.radius||8;return(0,d.BX)("g",{className:g,ref:r.rootRef,children:[e.icon&&{eye:(0,d.tZ)("image",{className:"icon",href:"/icon/Simple_Icon_Eye.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),down:(0,d.tZ)("image",{className:"icon",href:"/icon/solid_arrow-circle-down.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),right:(0,d.tZ)("image",{className:"icon",href:"/icon/solid_arrow-circle-right.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),run:(0,d.tZ)("image",{className:"icon",href:"/icon/person-running-fa6.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),finish:(0,d.tZ)("image",{className:"icon",href:"/icon/flag-checkered-fa6.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10})}[e.icon]||(0,d.tZ)("circle",{className:"inner-node",cx:r.position.x,cy:r.position.y,r:4}),(0,d.tZ)("circle",{className:"node",cx:r.position.x,cy:r.position.y,r:i}),(0,d.tZ)("line",{className:"drag-indicator",stroke:e.stroke||"blue"})]})}var g=(0,l.iv)(r||(r=(0,i.Z)(["\n  circle.node {\n    fill: rgba(0, 0, 100, 0.1);\n    stroke: rgba(0, 0, 100, 0.2);\n    stroke-dasharray: 4px 4px;\n    cursor: pointer;\n  }\n  circle.inner-node {\n    stroke: black;\n    cursor: pointer;\n    stroke-width: 0.5;\n  }\n  line.drag-indicator {\n    display: none;\n    stroke-width: 2.5;\n    user-select: none;\n    pointer-events: none;\n  }\n"])))},44275:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(79056),i=t(59748),o=t(84175);function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=i.default.useState(e),a=(0,r.Z)(t,1),l=a[0];return i.default.useMemo((function(){var t=e.toString()!==l._prevFn;if(l._prevFn)if(t){for(var i=e(),a=0,c=Object.entries(i);a<c.length;a++){var s,p,d,u=(0,r.Z)(c[a],2),g=u[0],v=u[1],f=g;if("function"===typeof v)l[f]=v;else if(null!==(s=Object.getOwnPropertyDescriptor(l,f))&&void 0!==s&&s.get||null!==(p=Object.getOwnPropertyDescriptor(l,f))&&void 0!==p&&p.set){var y,h;Object.defineProperty(l,f,{get:null===(y=Object.getOwnPropertyDescriptor(i,f))||void 0===y?void 0:y.get,set:null===(h=Object.getOwnPropertyDescriptor(i,f))||void 0===h?void 0:h.set})}else g in l?l._prevInit&&null!==(d=n.overwrite)&&void 0!==d&&d[f]&&!(0,o.fS)(l._prevInit[f],i[f])&&(l[f]=i[f]):l[f]=v}for(var E=0,b=Object.keys(l);E<b.length;E++){var m=b[E];m in i||["_prevFn","_prevInit"].includes(m)||delete l[m]}l._prevFn=e.toString(),l._prevInit=i}else for(var w=e(),O=0,x=Object.entries(w);O<x.length;O++){var Z,P,k=(0,r.Z)(x[O],2),D=k[0],S=k[1];if("function"===typeof S)l[D]=S;else if(null!==(Z=Object.getOwnPropertyDescriptor(l,D))&&void 0!==Z&&Z.get||null!==(P=Object.getOwnPropertyDescriptor(l,D))&&void 0!==P&&P.set){var j,_;Object.defineProperty(l,D,{get:null===(j=Object.getOwnPropertyDescriptor(w,D))||void 0===j?void 0:j.get,set:null===(_=Object.getOwnPropertyDescriptor(w,D))||void 0===_?void 0:_.set})}}else l._prevFn=e.toString(),l._prevInit=e()}),n.deps||[]),l}}}]);