"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4637],{34637:function(n,e,t){t.r(e),t.d(e,{default:function(){return g}});var o,r=t(52209),i=t(92809),a=(t(67294),t(88269)),s=t(35490),c=t(91441),p=t(48103),d=t(83159),l=t(95814),u=t(19964),f=t(85893);function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function v(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function g(n){var e=(0,l.Z)(n.layoutKey).data,t=(0,u.Z)(n.layoutKey,e,n.disabled).data,o=t?t.graph.nodesArray.map((function(n,e){return t.graph.nodeToMeta[e]})):[];return(0,f.jsxs)(d.Z,{gridBounds:s.l,initViewBox:x,maxZoom:6,className:m,dark:!0,children:[e&&(0,f.jsx)("image",v(v({},e.pngRect),{},{className:"geomorph",href:(0,c.qX)(n.layoutKey)})),t&&!n.disabled&&(0,f.jsxs)(f.Fragment,{children:[t.graph.nodesArray.map((function(n,e,t){var o=n.id,r=n.centroid,i=n.neighbours;return(0,f.jsx)("g",{children:i.map((function(n){return(0,f.jsx)("line",{className:"edge",x1:r.x,y1:r.y,x2:t[n].centroid.x,y2:t[n].centroid.y})}))},o)})),t.graph.nodesArray.map((function(n,e){var o=n.vertexIds;return(0,f.jsx)("polygon",{points:"".concat(o.map((function(n){return t.graph.vectors[n]}))),stroke:"#00000044",strokeWidth:.1,fill:t.graph.nodeToMeta[e].doorId>=0?t.graph.nodeToMeta[e].roomId>=0?"#ffff0066":"#ff000066":t.graph.nodeToMeta[e].roomId>=0?"#00ff0066":"none"})})),t.graph.nodesArray.map((function(n,e){var t=n.id,r=n.centroid;return(0,f.jsx)("circle",{className:"node",cx:r.x,cy:r.y,r:2,children:(0,f.jsxs)("title",{children:[e,":"," ",JSON.stringify(o[e])]})},t)}))]})]})}var m=(0,a.iv)(o||(o=(0,r.Z)(["\n  image.geomorph {\n    /* filter: invert(); */\n  }\n  circle.node {\n    fill: #ff000068;\n    /* pointer-events: none; */\n  }\n  line.edge {\n    stroke: #900;\n    stroke-width: 1;\n    pointer-events: none;\n  }\n\n  polygon.navtri {\n    fill: transparent;\n    transition: fill 0.3s;\n    &:hover, &:active, &:focus {\n      fill: #8080ff37;\n      stroke: rgba(0, 0, 255, 0.3);\n    }\n  }  \n"]))),x=new p.UL(0,0,600,600)},35490:function(n,e,t){t.d(e,{l:function(){return r},r:function(){return i}});var o=t(48103),r=new o.UL(-5e3,-5e3,10001,10001),i=new o.UL(0,0,1200,600)},83159:function(n,e,t){t.d(e,{Z:function(){return f}});var o,r=t(52209),i=t(79056),a=t(67294),s=t(88269),c=t(94184),p=t.n(c),d=t(48103),l=t(50269),u=t(85893);function f(n){var e=a.useState((function(){var e=n.initViewBox.clone(),i=n.minZoom||.5,a=n.maxZoom||2;return{viewBox:e,panFrom:null,zoom:n.initZoom||1,ptrs:[],ptrDiff:null,root:{},rootCss:(0,s.iv)(o||(o=(0,r.Z)(["\n        width: 100%;\n        height: 100%;\n\n        touch-action: pan-x pan-y pinch-zoom;\n        background-color: ",";\n\n        > g.content {\n          /** TODO justification? */\n          shape-rendering: ",";\n        }\n        > .grid {\n          pointer-events: none;\n        }\n      "])),n.dark?"#000":"none",(0,l.us)()?"optimizeSpeed":"auto"),onPointerDown:function(n){(0,l.af)(n)&&t.ptrs.length<2&&(t.panFrom=(new d.dl).copy((0,l.zk)((0,l.Xs)(n))),t.ptrs.push((0,l.Xs)(n)))},onPointerMove:function(o){if(t.ptrs=t.ptrs.map((function(n){return n.pointerId===o.pointerId?(0,l.Xs)(o):n})),2===t.ptrs.length){var r=Math.abs(t.ptrs[1].clientX-t.ptrs[0].clientX);if(null!==t.ptrDiff){var i,a=(0,l._Y)(t.ptrs);t.zoomTo(a,.02*(r-t.ptrDiff)),t.root.setAttribute("viewBox","".concat(t.viewBox)),null===(i=n.onUpdate)||void 0===i||i.call(n,t.root)}t.ptrDiff=r}else if(t.panFrom){var s,c=(0,l.zk)((0,l.Xs)(o));e.delta(t.panFrom.x-c.x,t.panFrom.y-c.y),t.root.setAttribute("viewBox","".concat(t.viewBox)),null===(s=n.onUpdate)||void 0===s||s.call(n,t.root)}},onPointerUp:function(n){t.panFrom=null,t.ptrs=t.ptrs.filter((function(e){return n.pointerId!==e.pointerId})),t.ptrs.length<2&&(t.ptrDiff=null),1===t.ptrs.length&&(t.panFrom=(new d.dl).copy((0,l.zk)(t.ptrs[0])))},onTouchStart:function(n){n.preventDefault()},onWheel:function(e){if(e.preventDefault(),(0,l.af)(e)){var o,r=(0,l.zk)((0,l.Xs)(e));t.zoomTo(r,-.003*e.deltaY),t.root.setAttribute("viewBox","".concat(t.viewBox)),null===(o=n.onUpdate)||void 0===o||o.call(n,t.root)}},rootRef:function(n){n&&(t.root=n,n.addEventListener("wheel",t.onWheel,{passive:!1}),n.addEventListener("pointerdown",t.onPointerDown,{passive:!0}),n.addEventListener("pointermove",t.onPointerMove,{passive:!0}),n.addEventListener("pointerup",t.onPointerUp,{passive:!0}),n.addEventListener("pointercancel",t.onPointerUp,{passive:!0}),n.addEventListener("pointerleave",t.onPointerUp,{passive:!0}),n.addEventListener("touchstart",t.onTouchStart,{passive:!1}))},zoomTo:function(o,r){var s=Math.min(Math.max(t.zoom+r,i),a);e.x=t.zoom/s*(e.x-o.x)+o.x,e.y=t.zoom/s*(e.y-o.y)+o.y,e.width=1/s*n.initViewBox.width,e.height=1/s*n.initViewBox.height,t.zoom=s}}})),t=(0,i.Z)(e,1)[0];return(0,u.jsxs)("svg",{ref:t.rootRef,className:t.rootCss,preserveAspectRatio:"xMinYMin slice",viewBox:"".concat(t.viewBox),children:[(0,u.jsx)("g",{className:p()("content",n.className),children:n.children}),(0,u.jsx)(h,{bounds:n.gridBounds,dark:n.dark})]})}function h(n){var e=a.useMemo((function(){return v++}),[]);return(0,u.jsx)(u.Fragment,{children:[10,60].flatMap((function(t,o){return[(0,u.jsx)("defs",{children:(0,u.jsx)("pattern",{id:"pattern-grid-".concat(t,"x").concat(t,"--").concat(e),width:t,height:t,patternUnits:"userSpaceOnUse",children:(0,u.jsx)("path",{d:"M ".concat(t," 0 L 0 0 0 ").concat(t),fill:"none",stroke:n.dark?"rgba(200,200,200,0.2)":"rgba(0,0,0,0.5)",strokeWidth:"0.3"})})},t+o),(0,u.jsx)("rect",{className:"grid",x:n.bounds.x,y:n.bounds.y,width:n.bounds.width,height:n.bounds.height,fill:"url(#pattern-grid-".concat(t,"x").concat(t,"--").concat(e,")")},t+o+1)]}))})}var v=0}}]);