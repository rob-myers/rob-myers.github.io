"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8901],{88901:function(n,e,t){t.r(e),t.d(e,{default:function(){return g}});var r=t(52209),a=t(59748),o=t(88269),i=t(48103),d=t(79056);var s,l,c=t(8311);function g(){var n=function(n){var e=a.default.useState(n),t=(0,d.Z)(e,1)[0];return a.default.useEffect((function(){var e=n.toString()!==t._prevFn;if(t._prevFn){if(e){for(var r=n(),a=0,o=Object.entries(r);a<o.length;a++){var i=(0,d.Z)(o[a],2),s=i[0],l=i[1];"function"===typeof l?t[s]=l:s in t||(t[s]=l)}for(var c=0,g=Object.entries(t);c<g.length;c++){var p=(0,d.Z)(g[c],2),f=p[0];p[1],f in r||delete t[f]}t._prevFn=n.toString()}}else t._prevFn=n.toString()}),[]),t}((function(){return{dragging:!1,dragFrom:new i.dl,dragTo:new i.dl,bounds:new i.UL,camPos:new i.dl(-v,v),camAngle:Math.PI/2,el:{root:{},camera:{},redDot:{},greenDot:{},dragLine:{}},onDragStart:function(e){n.dragging=!0,n.bounds.copy(n.el.root.getBoundingClientRect()),n.dragFrom.set(e.clientX-n.bounds.cx,e.clientY-n.bounds.cy),n.el.redDot.style.transform=n.el.greenDot.style.transform="translate(".concat(n.dragFrom.x,"px, ").concat(n.dragFrom.y,"px)")},onDragMove:function(e){if(n.dragging){n.bounds.copy(n.el.root.getBoundingClientRect()),n.dragTo.set(e.clientX-n.bounds.cx,e.clientY-n.bounds.cy),n.el.greenDot.style.transform="translate(".concat(n.dragFrom.x,"px, ").concat(n.dragTo.y,"px)");var t=n.dragTo.y-n.dragFrom.y;n.camAngle=Math.max(Math.min(n.camAngle+1e-4*t,Math.PI/2+Math.PI/4),Math.PI/50),n.updateCamera()}},onDragEnd:function(e){n.dragging=!1,n.el.redDot.style.transform=n.el.greenDot.style.transform,n.el.dragLine.style.width="0px"},rootRef:function(e){e&&(n.el.root=e,n.el.camera=e.querySelector("div.camera"),n.el.redDot=e.querySelector("div.dot.red"),n.el.greenDot=e.querySelector("div.dot.green"),n.el.dragLine=e.querySelector("div.drag-line"),e.addEventListener("pointerdown",(function(e){return n.onDragStart(e)})),e.addEventListener("pointermove",(function(e){return n.onDragMove(e)})),e.addEventListener("pointerup",(function(e){return n.onDragEnd(e)})),e.addEventListener("pointerleave",(function(e){return n.onDragEnd(e)})),n.updateCamera())},updateCamera:function(){var e=[v*(1-Math.cos(n.camAngle)),v*Math.sin(n.camAngle),Math.atan((1-Math.cos(n.camAngle))/(Math.sin(n.camAngle)-h/(2*v)))],t=e[0],r=e[1],a=e[2];n.el.camera.style.transform="rotateX(".concat(a,"rad) translate3d(0, ").concat(-t,"px, ").concat(-r,"px)")}}}));return(0,c.tZ)(c.HY,{children:(0,c.tZ)("div",{className:p,ref:n.rootRef,children:(0,c.BX)("div",{className:b,children:[(0,c.tZ)("div",{className:"camera",children:(0,c.BX)("div",{className:"pyramid",children:[(0,c.tZ)("div",{className:"base"}),(0,c.tZ)("div",{className:"side north"}),(0,c.tZ)("div",{className:"side east"}),(0,c.tZ)("div",{className:"side south"}),(0,c.tZ)("div",{className:"side west"})]})}),(0,c.tZ)("div",{className:"drag-line"}),(0,c.tZ)("div",{className:"dot red"}),(0,c.tZ)("div",{className:"dot green"})]})})})}var p=(0,o.iv)(s||(s=(0,r.Z)(["\n  background: #000000;\n  height: 100%;\n"]))),f=.04,m=360,u=360,h=Math.sqrt(3)/2*9e3*f,v=4800,b=(0,o.iv)(l||(l=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n  transform: translate(50%, 50%);\n  /* transform: scale(1.5) translate(50%, 50%); */\n  transform-origin: center;\n  position: relative;\n  \n  perspective: ","px;\n  perspective-origin: 0 0;\n  transform-style: preserve-3d;\n  \n  .camera {\n    transform-style: preserve-3d;\n    transform: rotateX(45deg) translate3d(0, ","px, ","px);\n    /** ? */\n    height: 100%;\n  }\n\n  .drag-line {\n    position: absolute;\n    height: 2px;\n    width: 0px;\n    left: 0;\n    top: 0;\n    background: white;\n    transform-origin: left center;\n  }\n  .dot {\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    left: ","px;\n    top: ","px;\n    pointer-events: none;\n  }\n  .dot.red {\n    background: red;\n  }\n  .dot.green {\n    background: green;\n  }\n\n  .pyramid {\n    transform-style: preserve-3d;\n    transform-origin: 0 ","px;\n    transform: rotateZ(45deg); /** TODO can adjust */\n  }\n  .base {\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    left: ","px;\n    top: ","px;\n    background: rgba(255, 0, 0, 0.1);\n    backface-visibility: hidden;\n  }\n\n  .side {\n    position: absolute;\n    width: 0;\n    height: 0;\n    backface-visibility: hidden;\n  }\n  .north {\n    left: ","px;\n    top: ","px;\n    border-left: ","px solid transparent;\n    border-right: ","px solid transparent;\n    border-top: ","px solid rgba(255, 255, 255, 0.1);\n    transform-origin: top;\n    transform: rotateX(60deg);\n  }\n  .east {\n    left: ","px;\n    top: ","px;\n    border-bottom: ","px solid transparent;\n    border-top: ","px solid transparent;\n    border-right: ","px solid rgba(255, 255, 255, 0.2);\n    transform-origin: right;\n    transform: rotateY(60deg);\n  }\n  /** We raise south-facing side pi/3, looking down from above */\n  .south {\n    left: ","px;\n    top: ","px;\n    border-left: ","px solid transparent;\n    border-right: ","px solid transparent;\n    border-bottom: ","px solid rgba(255, 255, 255, 0.3);\n    transform-origin: bottom;\n    transform: rotateX(-60deg);\n  }\n  .west {\n    left: ","px;\n    top: ","px;\n    border-bottom: ","px solid transparent;\n    border-top: ","px solid transparent;\n    border-left: ","px solid rgba(255, 255, 255, 0.4);\n    transform-origin: left;\n    transform: rotateY(-60deg);\n  }\n\n"])),v,-v,-v,4,4,-2,-2,-180,m,m,-180,-360,-180,-360,180,180,u,-180,-360,180,180,u,-180,-360,180,180,u,-180,-360,180,180,u)}}]);