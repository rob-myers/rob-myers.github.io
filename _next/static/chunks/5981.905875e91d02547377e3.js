"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5981],{85981:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var n,o=r(52209),c=r(92809),i=(r(59748),r(88269)),u=r(35490),s=r(91441),a=r(83159),p=r(95814),l=r(8311);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){(0,c.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t){var e=(0,p.Z)(t.layoutKey).data;return(0,l.tZ)(a.Z,{gridBounds:u.l,initViewBox:u.r,maxZoom:8,className:b,children:e&&(0,l.BX)(l.HY,{children:[(0,l.tZ)("image",d(d({},e.d.pngRect),{},{className:"geomorph",href:(0,s.qX)(t.layoutKey)})),!t.disabled&&(0,l.tZ)(g,{gm:e})]})})}function g(t){var e=t.gm;return(0,l.tZ)("foreignObject",d(d({},e.d.pngRect),{},{xmlns:"http://www.w3.org/1999/xhtml",children:(0,l.tZ)("div",{onPointerUp:function(t){var r=t.target,n=[r.clientWidth,Number(r.getAttribute("data-index"))],o=n[1],c=n[0]<=10?e.doors[o].rect.width:10;r.style.width="".concat(c,"px")},children:e.doors.map((function(t,r){var n=t.rect,o=t.angle;return(0,l.tZ)("div",{className:"door","data-index":r,style:{left:n.x-e.d.pngRect.x,top:n.y-e.d.pngRect.y,width:n.width,height:n.height,transformOrigin:"top left",transform:"rotate(".concat(o,"rad)")}})}))})}))}var b=(0,i.iv)(n||(n=(0,o.Z)(["\n  foreignObject {\n    div.door {\n      position: absolute;\n      cursor: pointer;\n      background: white;\n      border: 1px solid black;\n\n      transition: width 500ms ease;\n      &.open {\n        width: 0;\n      }\n    }\n  }\n"])))},95814:function(t,e,r){r.d(e,{Z:function(){return g}});var n=r(92809),o=r(97131),c=r(30266),i=r(809),u=r.n(i),s=r(88767),a=r(91441),p=r(48103),l=r(49082),f=r(20720);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e){return(0,s.useQuery)((0,a.tU)(t),(0,c.Z)(u().mark((function e(){var r,n,c,i,s,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((0,a.tU)(t)).then((function(t){return t.json()})).then(l.Vn);case 2:return r=e.sent,n=f.G.fromJson(r.roomGraph),c=n.nodesArray.filter((function(t){return"room"===t.type})).map((function(t,e){var c=n.getEdgesFrom(t).flatMap((function(t){var e=t.dst;return"door"===e.type?r.doors[e.doorIndex].poly:[]}));return p.LA.union([r.holes[e]].concat((0,o.Z)(c)))[0]})),i=r.groups.singles.filter((function(t){return t.tags.includes("switch")})).map((function(t){return t.poly.center})),s=r.groups.singles.filter((function(t){return t.tags.includes("spawn")})).map((function(t){return t.poly.center})),d=h(h({},r),{},{d:{holesWithDoors:c,holeSwitches:r.holes.map((function(t){return i.find((function(e){return t.contains(e)}))||t.rect.center})),hullDoors:r.doors.filter((function(t){return t.tags.includes("hull")})),hullOutline:r.hullPoly[0].removeHoles(),pngRect:p.UL.fromJson(r.items[0].pngRect),roomGraph:n,spawnPoints:s}}),e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)}))),h({cacheTime:1/0},e))}}}]);