"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2690],{92690:function(t,e,r){r.r(e),r.d(e,{default:function(){return _}});var n=r(52209),o=r(92809),i=r(88269),c=r(35490),a=r(91441),u=r(49345),s=r(35650),f=r(21225),p=r(83159),l=r(59748),d=r(48103),y=r(68451),O=r(8311);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t){var e=(0,s.Z)((function(){var r=t.json;return{dark:new d.LA,lights:[],computeLights:function(t){var n=d.LA.from(r.hull.poly[0]).removeHoles(),o=r.walls.concat(r.doors.map((function(t){return t.poly}))).map((function(t){return d.LA.from(t)})).flatMap((function(t){return y.J.triangulationToPolys(t.fastTriangulate())})),i=t.filter((function(t){return n.contains(t)}));e.lights=i.map((function(t){var e=y.J.lightPolygon(t,2e3,o),r=e.rect;return{position:t,poly:e,ratio:new d.dl((t.x-r.x)/r.width,(t.y-r.y)/r.height)}})),e.dark=d.LA.cutOut(e.lights.map((function(t){return t.poly})),[n])[0]}}}));return l.default.useEffect((function(){e.computeLights(t.positions.map(d.dl.from))}),[t.positions]),(0,O.BX)(O.HY,{children:[(0,O.BX)("defs",{children:[e.lights.map((function(t,e){return(0,O.BX)("radialGradient",{id:"my-radial-".concat(e),fx:t.ratio.x,fy:t.ratio.y,children:[(0,O.tZ)("stop",{offset:"0%","stop-color":"white"}),(0,O.tZ)("stop",{offset:"98%","stop-color":m}),(0,O.tZ)("stop",{offset:"100%","stop-color":m})]})})),(0,O.BX)("mask",{id:"my-funky-mask",children:[(0,O.tZ)("rect",g(g({},t.json.pngRect),{},{fill:m})),e.lights.map((function(t,e){var r=t.poly;return(0,O.tZ)("path",{d:r.svgPath,fill:"url(#my-radial-".concat(e,")")})})),(0,O.tZ)("circle",{cx:"50",cy:"50",r:"50",fill:"url(#my-radial)"})]})]}),t.positions.map((function(t){return(0,O.tZ)("image",{href:"/icon/Simple_Icon_Eye.svg",width:"20",height:"20",x:t.x-10,y:t.y-10})}))]})}var v,m="#8a8a8a";function j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t){var e=t.json;return(0,O.tZ)("foreignObject",w(w({},e.pngRect),{},{xmlns:"http://www.w3.org/1999/xhtml",className:k,children:(0,O.tZ)("div",{onPointerUp:function(t){var r=t.target,n=[r.clientWidth,Number(r.getAttribute("data-index"))],o=n[1],i=n[0]<=10?e.doors[o].rect.width:10;r.style.width="".concat(i,"px")},children:e.doors.map((function(t,r){var n=t.rect,o=t.angle;return(0,O.tZ)("div",{className:"door","data-index":r,style:{left:n.x-e.pngRect.x,top:n.y-e.pngRect.y,width:n.width,height:n.height,transformOrigin:"top left",transform:"rotate(".concat(o,"rad)")}})}))})}))}var Z,k=(0,i.iv)(v||(v=(0,n.Z)(["\n  div.door {\n    position: absolute;\n    cursor: pointer;\n    background: ",";\n    border: 1px solid black;\n\n    transition: width 100ms ease-in;\n    &.open {\n      width: 0;\n    }\n  }\n"])),m);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t){var e=(0,f.Z)(E).data,r=(0,s.Z)((function(){return{lights:[new u.d(205,385),new u.d(620,315)]}}),{lights:function(t,e){return t.every((function(t,r){return t.equals(e[r])}))}});return(0,O.tZ)(p.Z,{dark:!0,gridBounds:c.l,initViewBox:c.r,maxZoom:6,className:S,children:e&&(0,O.BX)(O.HY,{children:[(0,O.tZ)("image",D(D({},e.pngRect),{},{href:(0,a.qX)(E),mask:"url(#my-funky-mask)"})),(0,O.tZ)(P,{json:e}),(0,O.tZ)(b,{json:e,positions:r.lights})]})})}var E="g-301--bridge",S=(0,i.iv)(Z||(Z=(0,n.Z)(["\n  path.shadow {\n    fill: #00000066;\n    pointer-events: none;\n  }\n"])))},21225:function(t,e,r){r.d(e,{Z:function(){return l}});var n=r(92809),o=r(30266),i=r(809),c=r.n(i),a=r(88767),u=r(18264),s=r(91441);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t){return(0,a.useQuery)((0,s.tU)(t),(0,o.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch((0,s.tU)(t)).then((function(t){return t.json()}));case 2:return r=e.sent,e.abrupt("return",p(p({},r),{},{d:{navPoly:r.navPoly.map(u.L.from)}}));case 4:case"end":return e.stop()}}),e)}))),{keepPreviousData:!0,cacheTime:1/0})}},35650:function(t,e,r){r.d(e,{Z:function(){return i}});var n=r(79056),o=r(59748);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.default.useState(t),i=(0,n.Z)(r,1),c=i[0];return o.default.useEffect((function(){var r=t.toString()!==c._prevFn;if(c._prevFn){if(r){for(var o=t(),i=0,a=Object.entries(o);i<a.length;i++){var u,s=(0,n.Z)(a[i],2),f=s[0],p=s[1];"function"===typeof p?c[f]=p:f in c?c._prevInit&&!1===(null===(u=e[f])||void 0===u?void 0:u.call(e,c._prevInit[f],o[f]))&&(c[f]=o[f]):c[f]=p}for(var l=0,d=Object.entries(c);l<d.length;l++){var y=(0,n.Z)(d[l],2),O=y[0];y[1];O in o||delete c[O]}c._prevFn=t.toString(),c._prevInit=o}}else c._prevFn=t.toString(),c._prevInit=t()}),[]),c}}}]);