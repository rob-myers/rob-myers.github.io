"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2464],{3368:function(n,e,t){t.d(e,{Z:function(){return u}});var o,i=t(52209),r=t(79056),a=t(67294),s=t(88269),l=t(48103),c=t(50269),p=t(27375),d=t(85893);function u(n){var e=(0,p.Z)(),t=a.useState((function(){var t,i={position:l.dl.from(n.initial),target:l.dl.from(n.initial),dragging:!1,rootEl:{},lineEl:{},circleEl:{},rootRef:function(n){n&&(o.rootEl=n,o.lineEl=n.querySelector("line.drag-indicator"),o.circleEl=n.querySelector("circle.node"),o.circleEl.addEventListener("pointerdown",o.startDrag),o.circleEl.addEventListener("pointerup",o.applyDrag))},startDrag:function(e){var t;e.stopPropagation(),o.dragging=!0,o.lineEl.style.display="inline",o.target.copy(o.position),["x1","x2"].forEach((function(n){return o.lineEl.setAttribute(n,String(o.position.x))})),["y1","y2"].forEach((function(n){return o.lineEl.setAttribute(n,String(o.position.y))}));var i=o.lineEl.ownerSVGElement;i.addEventListener("pointermove",o.onMove),i.addEventListener("pointerleave",o.endDrag),i.addEventListener("pointerup",o.applyDrag),window.addEventListener("keydown",o.endDragOnEscape),i.style.cursor="grabbing",null===(t=n.onStart)||void 0===t||t.call(n)},onMove:function(n){if(n.stopPropagation(),o.dragging){var e=(0,c.zk)({clientX:n.clientX,clientY:n.clientY,ownerSvg:o.lineEl.ownerSVGElement,pointerId:null}),t=e.x,i=e.y,r=new l.dl(t,i);o.position.distanceTo(r)>=20&&(o.target.set(t,i),o.lineEl.setAttribute("x2",String(t)),o.lineEl.setAttribute("y2",String(i)))}},endDrag:function(){if(o.dragging){o.dragging=!1,o.lineEl.style.display="none",o.lineEl.setAttribute("x2",o.lineEl.getAttribute("x1")),o.lineEl.setAttribute("y2",o.lineEl.getAttribute("y1"));var n=o.lineEl.ownerSVGElement;n.removeEventListener("pointermove",o.onMove),n.removeEventListener("pointerleave",o.endDrag),n.removeEventListener("pointerup",o.applyDrag),window.removeEventListener("keydown",o.endDragOnEscape),n.style.cursor="auto"}},applyDrag:function(){var e,t,i;o.dragging&&(o.endDrag(),null!==(e=n.shouldCancel)&&void 0!==e&&e.call(n,o.position.clone(),o.target.clone())||(o.target.distanceTo(o.position)<20?null===(t=n.onClick)||void 0===t||t.call(n,o.position.clone()):(o.moveTo(o.target),null===(i=n.onStop)||void 0===i||i.call(n,o.target.clone()))))},endDragOnEscape:function(n){"Escape"===n.key&&o.endDrag()},moveTo:function(n){o.position.copy(n),o.lineEl.setAttribute("x1",String(o.target.x)),o.lineEl.setAttribute("y1",String(o.target.y)),e()}};return null===(t=n.onLoad)||void 0===t||t.call(n,{moveTo:i.moveTo,getPosition:function(){return o.position.clone()}}),i})),o=(0,r.Z)(t,1)[0],i=n.radius||8;return(0,d.jsxs)("g",{className:g,ref:o.rootRef,children:[n.icon&&{eye:(0,d.jsx)("image",{className:"icon",href:"/icon/Simple_Icon_Eye.svg",width:"20",height:"20",x:o.position.x-10,y:o.position.y-10}),down:(0,d.jsx)("image",{className:"icon",href:"/icon/solid_arrow-circle-down.svg",width:"20",height:"20",x:o.position.x-10,y:o.position.y-10}),right:(0,d.jsx)("image",{className:"icon",href:"/icon/solid_arrow-circle-right.svg",width:"20",height:"20",x:o.position.x-10,y:o.position.y-10}),run:(0,d.jsx)("image",{className:"icon",href:"/icon/person-running-fa6.svg",width:"20",height:"20",x:o.position.x-10,y:o.position.y-10}),finish:(0,d.jsx)("image",{className:"icon",href:"/icon/flag-checkered-fa6.svg",width:"20",height:"20",x:o.position.x-10,y:o.position.y-10})}[n.icon]||(0,d.jsx)("circle",{className:"inner-node",cx:o.position.x,cy:o.position.y,r:4}),(0,d.jsx)("circle",{className:"node",cx:o.position.x,cy:o.position.y,r:i}),(0,d.jsx)("line",{className:"drag-indicator",stroke:n.stroke||"blue"})]})}var g=(0,s.iv)(o||(o=(0,i.Z)(["\n  circle.node {\n    fill: rgba(0, 0, 100, 0.1);\n    stroke: rgba(0, 0, 100, 0.2);\n    stroke-dasharray: 4px 4px;\n    cursor: pointer;\n  }\n  circle.inner-node {\n    stroke: black;\n    cursor: pointer;\n    stroke-width: 0.5;\n  }\n  line.drag-indicator {\n    display: none;\n    stroke-width: 2.5;\n    user-select: none;\n    pointer-events: none;\n  }\n"])))},62464:function(n,e,t){t.r(e),t.d(e,{default:function(){return E}});var o,i,r=t(52209),a=t(92809),s=(t(67294),t(88269)),l=t(94184),c=t.n(l),p=t(35490),d=t(48103),u=t(91441),g=t(95814),f=t(19964),h=t(44275),v=t(83159),m=t(3368),x=t(85893);function y(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function w(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?y(Object(t),!0).forEach((function(e){(0,a.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function E(n){var e="g-301--bridge",t=(0,g.Z)(e).data,o=(0,f.Z)("g-301--bridge",t,n.disabled).data,i=(0,h.Z)((function(){return{rootEl:{},pathEl:null,source:new d.dl(300,300),target:new d.dl(600,300),path:[],updatePath:function(){if(o){var n,e=o.graph.findPath(i.source,i.target);i.path=e?e.fullPath:[i.source],i.pathEl=i.pathEl||i.rootEl.querySelector("polyline.navpath"),null===(n=i.pathEl)||void 0===n||n.setAttribute("points","".concat(i.path))}}}}),{deps:[o]});return(0,x.jsx)(v.Z,{gridBounds:p.l,initViewBox:p.r,maxZoom:6,children:(0,x.jsxs)("g",{className:c()(b,!n.disabled&&k),ref:function(n){n&&(i.rootEl=n,i.updatePath())},children:[t&&(0,x.jsx)("image",w(w({},t.pngRect),{},{className:"geomorph",href:(0,u.qX)(e)})),!n.disabled&&(null===o||void 0===o?void 0:o.graph.nodesArray.map((function(n){var e=n.vertexIds;return(0,x.jsx)("polygon",{className:"navtri",points:"".concat(e.map((function(n){return o.graph.vectors[n]})))})}))),t&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{initial:i.source,icon:"run",onStop:function(n){if(!t.navPoly.some((function(e){return e.contains(n)})))return"cancel";i.source.copy(n),i.updatePath()}}),(0,x.jsx)("polyline",{className:"navpath",points:"".concat(i.path)}),(0,x.jsx)(m.Z,{initial:i.target,icon:"finish",onStop:function(n){if(!t.navPoly.some((function(e){return e.contains(n)})))return"cancel";i.target.copy(n),i.updatePath()}})]})]})})}var b=(0,s.iv)(o||(o=(0,r.Z)(["\n  border: 1px solid #555555;\n  height: inherit;\n\n  /* image.geomorph, image.icon {\n    filter: invert(100%);\n  } */\n\n  polyline.navpath {\n    fill: none;\n    stroke: #083;\n    stroke-width: 2;\n    stroke-dasharray: 8px;\n    stroke-dashoffset: 16px;\n  }\n\n  @keyframes stringPullFlash {\n    0% { stroke-dashoffset: 16px; }\n    100% { stroke-dashoffset: 0px; }\n  }\n\n  polygon.navtri {\n    fill: transparent;\n    &:hover {\n      stroke: red;\n    }\n  }\n"]))),k=(0,s.iv)(i||(i=(0,r.Z)(["\n  polyline.navpath {\n    animation: 600ms stringPullFlash infinite linear;\n  }\n"])))},35490:function(n,e,t){t.d(e,{l:function(){return i},r:function(){return r}});var o=t(48103),i=new o.UL(-5e3,-5e3,10001,10001),r=new o.UL(0,0,1200,600)},83159:function(n,e,t){t.d(e,{Z:function(){return g}});var o,i=t(52209),r=t(79056),a=t(67294),s=t(88269),l=t(94184),c=t.n(l),p=t(48103),d=t(50269),u=t(85893);function g(n){var e=a.useState((function(){var e=n.initViewBox.clone(),r=n.minZoom||.5,a=n.maxZoom||2;return{viewBox:e,panFrom:null,zoom:n.initZoom||1,ptrs:[],ptrDiff:null,root:{},rootCss:(0,s.iv)(o||(o=(0,i.Z)(["\n        width: 100%;\n        height: 100%;\n\n        touch-action: pan-x pan-y pinch-zoom;\n        background-color: ",";\n\n        > g.content {\n          /** TODO justification? */\n          shape-rendering: ",";\n        }\n        > .grid {\n          pointer-events: none;\n        }\n      "])),n.dark?"#000":"none",(0,d.us)()?"optimizeSpeed":"auto"),onPointerDown:function(n){(0,d.af)(n)&&t.ptrs.length<2&&(t.panFrom=(new p.dl).copy((0,d.zk)((0,d.Xs)(n))),t.ptrs.push((0,d.Xs)(n)))},onPointerMove:function(o){if(t.ptrs=t.ptrs.map((function(n){return n.pointerId===o.pointerId?(0,d.Xs)(o):n})),2===t.ptrs.length){var i=Math.abs(t.ptrs[1].clientX-t.ptrs[0].clientX);if(null!==t.ptrDiff){var r,a=(0,d._Y)(t.ptrs);t.zoomTo(a,.02*(i-t.ptrDiff)),t.root.setAttribute("viewBox","".concat(t.viewBox)),null===(r=n.onUpdate)||void 0===r||r.call(n,t.root)}t.ptrDiff=i}else if(t.panFrom){var s,l=(0,d.zk)((0,d.Xs)(o));e.delta(t.panFrom.x-l.x,t.panFrom.y-l.y),t.root.setAttribute("viewBox","".concat(t.viewBox)),null===(s=n.onUpdate)||void 0===s||s.call(n,t.root)}},onPointerUp:function(n){t.panFrom=null,t.ptrs=t.ptrs.filter((function(e){return n.pointerId!==e.pointerId})),t.ptrs.length<2&&(t.ptrDiff=null),1===t.ptrs.length&&(t.panFrom=(new p.dl).copy((0,d.zk)(t.ptrs[0])))},onTouchStart:function(n){n.preventDefault()},onWheel:function(e){if(e.preventDefault(),(0,d.af)(e)){var o,i=(0,d.zk)((0,d.Xs)(e));t.zoomTo(i,-.003*e.deltaY),t.root.setAttribute("viewBox","".concat(t.viewBox)),null===(o=n.onUpdate)||void 0===o||o.call(n,t.root)}},rootRef:function(n){n&&(t.root=n,n.addEventListener("wheel",t.onWheel,{passive:!1}),n.addEventListener("pointerdown",t.onPointerDown,{passive:!0}),n.addEventListener("pointermove",t.onPointerMove,{passive:!0}),n.addEventListener("pointerup",t.onPointerUp,{passive:!0}),n.addEventListener("pointercancel",t.onPointerUp,{passive:!0}),n.addEventListener("pointerleave",t.onPointerUp,{passive:!0}),n.addEventListener("touchstart",t.onTouchStart,{passive:!1}))},zoomTo:function(o,i){var s=Math.min(Math.max(t.zoom+i,r),a);e.x=t.zoom/s*(e.x-o.x)+o.x,e.y=t.zoom/s*(e.y-o.y)+o.y,e.width=1/s*n.initViewBox.width,e.height=1/s*n.initViewBox.height,t.zoom=s}}})),t=(0,r.Z)(e,1)[0];return(0,u.jsxs)("svg",{ref:t.rootRef,className:t.rootCss,preserveAspectRatio:"xMinYMin slice",viewBox:"".concat(t.viewBox),children:[(0,u.jsx)("g",{className:c()("content",n.className),children:n.children}),(0,u.jsx)(f,{bounds:n.gridBounds,dark:n.dark})]})}function f(n){var e=a.useMemo((function(){return h++}),[]);return(0,u.jsx)(u.Fragment,{children:[10,60].flatMap((function(t,o){return[(0,u.jsx)("defs",{children:(0,u.jsx)("pattern",{id:"pattern-grid-".concat(t,"x").concat(t,"--").concat(e),width:t,height:t,patternUnits:"userSpaceOnUse",children:(0,u.jsx)("path",{d:"M ".concat(t," 0 L 0 0 0 ").concat(t),fill:"none",stroke:n.dark?"rgba(200,200,200,0.2)":"rgba(0,0,0,0.5)",strokeWidth:"0.3"})})},t+o),(0,u.jsx)("rect",{className:"grid",x:n.bounds.x,y:n.bounds.y,width:n.bounds.width,height:n.bounds.height,fill:"url(#pattern-grid-".concat(t,"x").concat(t,"--").concat(e,")")},t+o+1)]}))})}var h=0}}]);