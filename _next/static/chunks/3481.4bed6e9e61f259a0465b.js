"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3481],{73481:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o,r=n(52209),i=n(59748),a=n(88269),s=n(95090),l=n(36694),d=n(48103),c=n(91441),u=n(49082),p=n(95814),g=n(35650),h=n(27375),f=n(87079),b=n(30245),m=n(8311);function v(e){var t=(0,p.Z)(w).data,n=(0,h.Z)(),o=(0,g.Z)((function(){return{clipPath:"none",doorsApi:{},isHoleShown:{},wire:new s.x,onToggleLight:function(e){var n=e.target;if(t){var r=Number(n.getAttribute("data-index"));r in o.isHoleShown?delete o.isHoleShown[r]:o.isHoleShown[r]=!0,o.updateMask()}},updateMask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var r=t.d.roomGraph,i=Object.keys(o.isHoleShown).map(Number),a=o.doorsApi.getOpen(),s=i.flatMap((function(e){return r.getEnterableRooms(r.nodesArray[e],a).map((function(e){return e.holeIndex}))})),l=Array.from(new Set(i.concat(s))),c=l.map((function(e){return t.d.holesWithDoors[e]})),u=r.getAdjacentDoors(i.map((function(e){return r.nodesArray[e]})));this.doorsApi.setObservableDoors(u.map((function(e){return e.doorIndex})));var p=d.LA.cutOut(c,[t.d.hullOutline]).map((function(e){return e.translate(-t.d.pngRect.x,-t.d.pngRect.y)})),g=p.map((function(e){return"".concat(e.svgPath)})).join(" ");n(),setTimeout((function(){o.clipPath="path('".concat(g,"')"),n()}),e)}}}}),[t]);return i.default.useEffect((function(){if(t){o.updateMask();var e=o.wire.pipe((0,l.h)((function(e){return"closed-door"===e.key||"opened-door"===e.key}))).subscribe((function(e){return o.updateMask("closed-door"===e.key?300:0)}));return function(){return e.unsubscribe()}}}),[t]),(0,m.tZ)(f.Z,{dark:!0,className:k,children:t&&(0,m.BX)(m.HY,{children:[(0,m.tZ)("img",{className:"geomorph",src:(0,c.qX)(w),draggable:!1,style:{left:t.d.pngRect.x,top:t.d.pngRect.y,width:t.d.pngRect.width,height:t.d.pngRect.height}}),(0,m.tZ)("img",{className:"geomorph-dark",src:(0,c.qX)(w),draggable:!1,style:{left:t.d.pngRect.x,top:t.d.pngRect.y,width:t.d.pngRect.width,height:t.d.pngRect.height,clipPath:o.clipPath,WebkitClipPath:o.clipPath}}),(0,m.tZ)("div",{className:"light-toggles",onClick:o.onToggleLight,children:t.d.holeSwitches.map((function(e,t){return(0,m.tZ)("div",{"data-index":t,className:"toggle",style:{left:e.x-5,top:e.y-5,borderColor:o.isHoleShown[t]?"#5f5":"rgba(200, 0, 0, 0.3)",outline:o.isHoleShown[t]?"1px solid black":"1px solid rgba(255, 255, 255, 0.5)"}},t)}))}),(0,m.tZ)(b.Z,{gm:(0,u.mI)(t,[1,0,0,1,0,0]),wire:o.wire,onLoad:function(e){return o.doorsApi=e}})]})})}var w="g-302--xboat-repair-bay",k=(0,a.iv)(o||(o=(0,r.Z)(["\n  img.geomorph-dark {\n    position: absolute;\n    filter: invert(100%) brightness(45%) contrast(200%) sepia(0%) hue-rotate(0deg) blur(0px);\n  }\n  img.geomorph {\n    position: absolute;\n    filter: brightness(65%) sepia(50%) hue-rotate(180deg);\n  }\n  div.light-toggles {\n    position: absolute;\n\n    div.toggle {\n      border-radius: 5px;\n      border: 5px solid white;\n      position: absolute;\n      cursor: pointer;\n    }\n  }\n  svg.room-graph {\n    position: absolute;\n    pointer-events: none;\n    circle, line {\n      pointer-events: none;\n    }\n  }\n"])))}}]);