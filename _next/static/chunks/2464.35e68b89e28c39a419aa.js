"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2464],{62464:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var i,o,r=t(52209),a=t(92809),l=t(79056),c=t(59748),s=t(88269),p=t(94184),u=t.n(p),d=t(35490),g=t(48103),f=t(96005),v=t(91441),h=t(83159),y=t(17581),E=t(2074),m=t(21416),b=t(8311);function w(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function x(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?w(Object(t),!0).forEach((function(e){(0,a.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function k(n){var e="g-301--bridge",t=e,i=(0,E.Z)(e).data,o=(0,m.Z)(t,null===i||void 0===i?void 0:i.navDecomp,n.disabled).data,r=c.default.useState((function(){return{rootEl:{},pathEl:null,source:new g.dl(300,300),target:new g.dl(600,300),path:[],updatePath:function(){var n,e,i=f.k.getGroup(t,a.source);null!==i&&(a.path=[a.source.clone()].concat((null===(n=f.k.findPath(a.source,a.target,t,i))||void 0===n?void 0:n.path)||[]),a.pathEl=a.pathEl||a.rootEl.querySelector("polyline.navpath"),null===(e=a.pathEl)||void 0===e||e.setAttribute("points","".concat(a.path)))}}})),a=(0,l.Z)(r,1)[0];return(0,b.tZ)(h.Z,{gridBounds:d.l,initViewBox:d.r,maxZoom:6,children:(0,b.BX)("g",{className:u()(Z,!n.disabled&&S),ref:function(n){n&&(a.rootEl=n,a.updatePath())},children:[i&&(0,b.tZ)("image",x(x({},i.d.pngRect),{},{className:"geomorph",href:(0,v.qX)(e)})),!n.disabled&&(null===o||void 0===o?void 0:o.zone.groups.map((function(n){return n.map((function(n){var e=n.vertexIds;return(0,b.tZ)("polygon",{className:"navtri",points:"".concat(e.map((function(n){return null===o||void 0===o?void 0:o.zone.vertices[n]})))})}))}))),i&&(0,b.BX)(b.HY,{children:[(0,b.tZ)(y.Z,{initial:a.source,icon:"run",onStop:function(n){if(!i.navPoly.some((function(e){return e.contains(n)})))return"cancel";a.source.copy(n),a.updatePath()}}),(0,b.tZ)("polyline",{className:"navpath",points:"".concat(a.path)}),(0,b.tZ)(y.Z,{initial:a.target,icon:"finish",onStop:function(n){if(!i.navPoly.some((function(e){return e.contains(n)})))return"cancel";a.target.copy(n),a.updatePath()}})]})]})})}var Z=(0,s.iv)(i||(i=(0,r.Z)(["\n  border: 1px solid #555555;\n  height: inherit;\n\n  image.geomorph {\n    filter: invert(100%);\n  }\n  image.icon {\n    filter: invert(100%);\n  }\n\n  polyline.navpath {\n    fill: none;\n    stroke: #083;\n    stroke-width: 4;\n    stroke-dasharray: 8px;\n    stroke-dashoffset: 16px;\n  }\n\n  @keyframes stringPullFlash {\n    0% { stroke-dashoffset: 16px; }\n    100% { stroke-dashoffset: 0px; }\n  }\n\n  polygon.navtri {\n    fill: transparent;\n    &:hover {\n      stroke: #2b9900;\n    }\n  }\n"]))),S=(0,s.iv)(o||(o=(0,r.Z)(["\n  polyline.navpath {\n    animation: 600ms stringPullFlash infinite linear;\n  }\n"])))},17581:function(n,e,t){t.d(e,{Z:function(){return d}});var i,o=t(52209),r=t(79056),a=t(59748),l=t(88269),c=t(48103),s=t(50269),p=t(27375),u=t(8311);function d(n){var e=(0,p.Z)(),t=a.default.useState((function(){var t,o={position:c.dl.from(n.initial),target:c.dl.from(n.initial),dragging:!1,rootEl:{},lineEl:{},circleEl:{},rootRef:function(n){n&&(i.rootEl=n,i.lineEl=n.querySelector("line.drag-indicator"),i.circleEl=n.querySelector("circle.node"),i.circleEl.addEventListener("pointerdown",i.startDrag),i.circleEl.addEventListener("pointerup",i.applyDrag))},startDrag:function(e){var t;e.stopPropagation(),i.dragging=!0,i.lineEl.style.display="inline",i.target.copy(i.position),["x1","x2"].forEach((function(n){return i.lineEl.setAttribute(n,String(i.position.x))})),["y1","y2"].forEach((function(n){return i.lineEl.setAttribute(n,String(i.position.y))}));var o=i.lineEl.ownerSVGElement;o.addEventListener("pointermove",i.onMove),o.addEventListener("pointerleave",i.endDrag),o.addEventListener("pointerup",i.applyDrag),window.addEventListener("keydown",i.endDragOnEscape),o.style.cursor="grabbing",null===(t=n.onStart)||void 0===t||t.call(n)},onMove:function(n){if(n.stopPropagation(),i.dragging){var e=(0,s.zk)({clientX:n.clientX,clientY:n.clientY,ownerSvg:i.lineEl.ownerSVGElement,pointerId:null}),t=e.x,o=e.y,r=new c.dl(t,o);i.position.distanceTo(r)>=20&&(i.target.set(t,o),i.lineEl.setAttribute("x2",String(t)),i.lineEl.setAttribute("y2",String(o)))}},endDrag:function(){if(i.dragging){i.dragging=!1,i.lineEl.style.display="none",i.lineEl.setAttribute("x2",i.lineEl.getAttribute("x1")),i.lineEl.setAttribute("y2",i.lineEl.getAttribute("y1"));var n=i.lineEl.ownerSVGElement;n.removeEventListener("pointermove",i.onMove),n.removeEventListener("pointerleave",i.endDrag),n.removeEventListener("pointerup",i.applyDrag),window.removeEventListener("keydown",i.endDragOnEscape),n.style.cursor="auto"}},applyDrag:function(){var e,t,o;i.dragging&&(i.endDrag(),null!==(e=n.shouldCancel)&&void 0!==e&&e.call(n,i.position.clone(),i.target.clone())||(i.target.distanceTo(i.position)<20?null===(t=n.onClick)||void 0===t||t.call(n,i.position.clone()):(i.moveTo(i.target),null===(o=n.onStop)||void 0===o||o.call(n,i.target.clone()))))},endDragOnEscape:function(n){"Escape"===n.key&&i.endDrag()},moveTo:function(n){i.position.copy(n),i.lineEl.setAttribute("x1",String(i.target.x)),i.lineEl.setAttribute("y1",String(i.target.y)),e()}};return null===(t=n.onLoad)||void 0===t||t.call(n,{moveTo:o.moveTo,getPosition:function(){return i.position.clone()}}),o})),i=(0,r.Z)(t,1)[0],o=n.radius||8;return(0,u.BX)("g",{className:g,ref:i.rootRef,children:[n.icon&&{eye:(0,u.tZ)("image",{className:"icon",href:"/icon/Simple_Icon_Eye.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),down:(0,u.tZ)("image",{className:"icon",href:"/icon/solid_arrow-circle-down.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),right:(0,u.tZ)("image",{className:"icon",href:"/icon/solid_arrow-circle-right.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),run:(0,u.tZ)("image",{className:"icon",href:"/icon/person-running-fa6.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10}),finish:(0,u.tZ)("image",{className:"icon",href:"/icon/flag-checkered-fa6.svg",width:"20",height:"20",x:i.position.x-10,y:i.position.y-10})}[n.icon]||(0,u.tZ)("circle",{className:"inner-node",cx:i.position.x,cy:i.position.y,r:4}),(0,u.tZ)("circle",{className:"node",cx:i.position.x,cy:i.position.y,r:o}),(0,u.tZ)("line",{className:"drag-indicator",stroke:n.stroke||"blue"})]})}var g=(0,l.iv)(i||(i=(0,o.Z)(["\n  circle.node {\n    fill: rgba(0, 0, 100, 0.1);\n    stroke: rgba(0, 0, 100, 0.2);\n    stroke-dasharray: 4px 4px;\n    cursor: pointer;\n  }\n  circle.inner-node {\n    stroke: black;\n    cursor: pointer;\n    stroke-width: 0.5;\n  }\n  line.drag-indicator {\n    display: none;\n    stroke-width: 2.5;\n    user-select: none;\n    pointer-events: none;\n  }\n"])))}}]);