"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{5528:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r,i=n(52209),o=n(92809),l=n(79056),a=n(59748),c=n(88269),s=n(94184),u=n.n(s),p=n(48103),g=n(91441),d=n(68451),f=n(35490),y=n(83159),h=n(12891),v=n(28645),b=n(8311);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=(0,v.U)(e.layoutKey).data,n=a.default.useState((function(){return{lightA:new p.dl(205,385),lightB:new p.dl(930,385)}})),r=(0,l.Z)(n,1)[0];return(0,b.tZ)(y.Z,{gridBounds:f.l,initViewBox:f.r,maxZoom:6,className:u()(x,e.disabled&&"disabled"),dark:!0,children:t&&(0,b.BX)(b.HY,{children:[(0,b.tZ)("image",m(m({},t.pngRect),{},{className:"geomorph",href:(0,g.qX)(e.layoutKey)})),(0,b.tZ)(O,{init:r.lightA,walls:t.walls,hull:t.hull.poly}),(0,b.tZ)(O,{init:r.lightB,walls:t.walls,hull:t.hull.poly})]})})}function O(e){var t=e.init,n=e.walls,r=e.hull,i=a.default.useState((function(){return t})),o=(0,l.Z)(i,2),c=o[0],s=o[1],u=(0,a.useMemo)((function(){if(p.LA.from(r[0]).removeHoles().contains(c)){var e=n.map((function(e){return p.LA.from(e)})).flatMap((function(e){return d.J.triangulationToPolys(e.fastTriangulate())}));return d.J.lightPolygon(c,2e3,e)}return new p.LA}),[c.x,c.y]);return(0,b.BX)(b.HY,{children:[(0,b.tZ)("path",{className:"light",d:u.svgPath}),(0,b.tZ)(h.Z,{initial:c,onStop:s,radius:20,stroke:"black",icon:"eye"})]})}var x=(0,c.iv)(r||(r=(0,i.Z)(["\n  image {\n    filter: contrast(400%);\n  }\n\n  path.light {\n    fill: red;\n    animation: fadein 1s infinite alternate;\n    \n    @keyframes fadein {\n      from { opacity: 0; }\n      to { opacity: 0.4; }\n    }\n  }\n  &.disabled path.light {\n    animation: none;\n    opacity: 0.25;\n  }\n"])))},12891:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(52209),o=n(92809),l=n(79056),a=n(88269),c=n(59748),s=n(48103),u=n(50269),p=n(8311);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){var t=c.default.useState((function(){return{position:s.dl.from(e.initial),target:s.dl.from(e.initial),dragging:!1,rootEl:{},lineEl:{},circleEl:{},startDrag:function(t){var n;t.stopPropagation(),r.dragging=!0,r.lineEl.style.display="inline",r.target.copy(r.position),["x1","x2"].forEach((function(e){return r.lineEl.setAttribute(e,String(r.position.x))})),["y1","y2"].forEach((function(e){return r.lineEl.setAttribute(e,String(r.position.y))}));var i=r.lineEl.ownerSVGElement;i.addEventListener("pointermove",r.onMove),i.addEventListener("pointerleave",r.endDrag),i.addEventListener("pointerup",r.applyDrag),window.addEventListener("keydown",r.endDragOnEscape),i.style.cursor="grabbing",null===(n=e.onStart)||void 0===n||n.call(e)},onMove:function(e){if(e.stopPropagation(),r.dragging){var t=(0,u.zk)({clientX:e.clientX,clientY:e.clientY,ownerSvg:r.lineEl.ownerSVGElement,pointerId:null}),n=t.x,i=t.y;r.target.set(n,i),r.lineEl.setAttribute("x2",String(n)),r.lineEl.setAttribute("y2",String(i))}},endDrag:function(){r.dragging=!1,r.lineEl.style.display="none",r.lineEl.setAttribute("x2",r.lineEl.getAttribute("x1")),r.lineEl.setAttribute("y2",r.lineEl.getAttribute("y1"));var e=r.lineEl.ownerSVGElement;e.removeEventListener("pointermove",r.onMove),e.removeEventListener("pointerleave",r.endDrag),e.removeEventListener("pointerup",r.applyDrag),window.removeEventListener("keydown",r.endDragOnEscape),e.style.cursor="auto"},applyDrag:function(){var t;r.endDrag(),"cancel"===(null===(t=e.onStop)||void 0===t?void 0:t.call(e,s.dl.from(r.target)))||(r.position.copy(r.target),r.lineEl.setAttribute("x1",String(r.target.x)),r.lineEl.setAttribute("y1",String(r.target.y)),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r)))},endDragOnEscape:function(e){"Escape"===e.key&&r.endDrag()}}})),n=(0,l.Z)(t,2),r=n[0],i=n[1],a=e.radius||8;return(0,p.BX)("g",{className:f,ref:function(e){e&&(r.rootEl=e,r.lineEl=e.querySelector("line.drag-indicator"),r.circleEl=e.querySelector("circle.node"),r.circleEl.addEventListener("pointerdown",r.startDrag),r.circleEl.addEventListener("pointerup",r.applyDrag))},children:[e.icon&&{eye:(0,p.tZ)("image",{href:"/icon/Simple_Icon_Eye.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),down:(0,p.tZ)("image",{href:"/icon/solid_arrow-circle-down.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),right:(0,p.tZ)("image",{href:"/icon/solid_arrow-circle-right.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),run:(0,p.tZ)("image",{href:"/icon/person-running-fa6.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10}),finish:(0,p.tZ)("image",{href:"/icon/flag-checkered-fa6.svg",width:"20",height:"20",x:r.position.x-10,y:r.position.y-10})}[e.icon]||(0,p.tZ)("circle",{className:"inner-node",cx:r.position.x,cy:r.position.y,r:a}),(0,p.tZ)("circle",{className:"node",cx:r.position.x,cy:r.position.y,r:a+20}),(0,p.tZ)("line",{className:"drag-indicator",stroke:e.stroke||"blue"})]})}var f=(0,a.iv)(r||(r=(0,i.Z)(["\n  circle.node {\n    fill: rgba(0, 0, 0, 0.2);\n    cursor: pointer;\n  }\n  circle.inner-node {\n    stroke: black;\n    cursor: pointer;\n    stroke-width: 0.5;\n  }\n  line.drag-indicator {\n    display: none;\n    stroke-width: 2.5;\n    user-select: none;\n    pointer-events: none;\n  }\n"])))}}]);