"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{71596:function(t,e,r){r.r(e),r.d(e,{default:function(){return w}});var o,n=r(52209),a=r(92809),c=r(30266),i=r(809),l=r.n(i),s=r(59748),u=r(88269),f=r(88767),p=r(48103),y=r(84273),d=r(83159),g=r(43350),h=r(8311);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t){var e=(0,f.useQuery)("".concat(t.layoutKey,"-json"),(0,c.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/geomorph/".concat(t.layoutKey,".json")).then((function(t){return t.json()})));case 1:case"end":return e.stop()}}),e)})))).data,r=(0,s.useMemo)((function(){if(null!==e&&void 0!==e&&e.walls){var t=((null===e||void 0===e?void 0:e.walls.map((function(t){return p.LA.from(t)})))||[]).flatMap((function(t){return y.J7.triangulationToPolys(t.fastTriangulate())})),r=new p.dl(300,300),o=y.J7.lightPolygon(r,800,t),n=o.rect;return{polygon:o,sourceRatios:new p.dl((r.x-n.x)/n.width,(r.y-n.y)/n.height)}}}),[null===e||void 0===e?void 0:e.walls]);return(0,h.BX)(d.Z,{gridBounds:g.l,initViewBox:g.r,maxZoom:6,className:v,children:[e&&(0,h.tZ)("image",O(O({},e.pngRect),{},{className:"geomorph",href:"/geomorph/".concat(t.layoutKey,".png")})),r&&(0,h.BX)(h.HY,{children:[(0,h.tZ)("defs",{children:(0,h.BX)("radialGradient",{id:"light-radial",cx:"".concat(100*r.sourceRatios.x,"%"),cy:"".concat(100*r.sourceRatios.y,"%"),r:"50%",children:[(0,h.tZ)("stop",{offset:"0%",style:{stopColor:"rgba(255, 255, 230, 0.75)"}}),(0,h.tZ)("stop",{offset:"50%",style:{stopColor:"rgba(230, 230, 230, 0.2)"}}),(0,h.tZ)("stop",{offset:"100%",style:{stopColor:"rgba(255, 200, 255, 0)"}})]})}),(0,h.tZ)("path",{fill:"url(#light-radial)",d:r.polygon.svgPath})]})]})}var v=(0,u.iv)(o||(o=(0,n.Z)(["\n  /* TODO */\n"])))}}]);