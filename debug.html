<!DOCTYPE html><html lang="en"><head><meta name="description" content="A Game AI focused roguelike, built blog by blog." /><link rel="icon" href="/favicon.ico" /><style id="_goober"> .go1654252976{padding:0;color:#aaa;}.go1654252976 h3{padding:20px 12px;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-size:1.8rem;font-weight:300;margin:0;border:0 solid #aaa;border-width:0 0 2px;}.go1654252976 h3 a{color:#ddd;}.go1654252976 ul{font-size:1.1rem;padding:6px 0;margin:0;border:0 solid #aaa;border-width:0 0 2px;}.go1654252976 ul li{list-style:none;list-style-position:inside;display:flex;}.go1654252976 ul li.current a{color:white;}.go1654252976 ul a{padding:10px 12px;width:100%;color:#888;}.go1654252976 ul a:hover{color:#ccc;}.go3338150716{position:fixed;z-index:11;height:calc(100% + 200px);width:256px;font-weight:300;font-family:sans-serif;background-color:#222;color:white;cursor:pointer;opacity:0.975;-webkit-tap-highlight-color:transparent;transition:left 500ms ease;}.go3338150716.open{left:0;}.go3338150716.closed{left:-256px;}.go3338150716 > .article-overlay{position:absolute;top:0;left:256px;width:100vw;height:0;background:rgba(0, 0, 0, .1);}@media(max-width: 1280px){.go3338150716.open > .article-overlay{height:100%;background:rgba(0, 0, 0, .25);}}.go3338150716 > .handle{position:absolute;top:-1px;right:-40px;width:40px;height:41px;display:flex;justify-content:center;align-items:center;user-select:none;}.go3338150716 > .handle .icon{display:flex;justify-content:center;align-items:center;background:#900;color:#fff;width:inherit;height:inherit;padding:0 0 2px 0;}.go200039322{position:fixed;cursor:pointer;z-index:6;left:0;width:calc(100vw + 256px);height:40px;background:black;}.go4227718824{min-width:256px;transition:min-width 500ms ease;}.go4227718824.closed{min-width:0;}@media(max-width: 1280px){.go4227718824{display:none;}}.go741482717{position:absolute;z-index:10;right:140px;top:-48px;font-size:1rem;}@media(max-width: 1024px){.go741482717{top:-32px;}}@media(max-width: 600px){.go741482717{top:0;}}.go741482717 > ul{position:fixed;width:140px;height:40px;display:flex;justify-content:center;align-items:center;padding:0;margin:0;}.go741482717 > ul li{list-style:none;list-style-position:inside;padding:0 5px;}.go741482717 > ul a{color:#ccc;}.go741482717 > ul a.primary{color:#fff;}.go405958682{font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;position:relative;padding-top:40px;}@media(max-width: 600px){.go405958682{padding-left:8px;border-bottom:2px solid #999;border:0 solid #000;padding-top:64px;}}.go405958682 h1{margin:0;font-size:6rem;font-weight:300;cursor:pointer;color:#333;display:inline-block;}@media(max-width: 800px){.go405958682 h1{font-size:5rem;}}@media(max-width: 600px){.go405958682 h1{font-size:3rem;}}.go405958682 p{color:#444;letter-spacing:2px;font-size:1.4rem;margin:0;padding:40px 0 48px;font-weight:300;}@media(max-width: 600px){.go405958682 p{font-size:1rem;padding:20px 0 20px 4px;color:#222;}}.go4140030{max-width:1024px;width:100%;padding:48px 64px;}@media(max-width: 1024px){.go4140030{padding:32px 64px;margin:0;}}@media(max-width: 600px){.go4140030{padding:0;}}.go1763247448{margin:0;border-color:var(--focus-bg);}@media(min-width: 800px){.go1763247448{padding-bottom:80px;border:0;}}.go239274143{font-family:Roboto, Arial, sans-serif;}.go239274143 > .top-right{position:absolute;right:-10px;top:calc(-32px + 6px);z-index:2;border-radius:4px 4px 0 0;padding:2px 16px;cursor:pointer;background:#333;color:#777;font-size:14px;font-weight:300;}.go239274143 > .top-right.enabled{color:#fff;}.go239274143 > .central{position:absolute;z-index:5;left:calc(50% - (128px / 2));top:calc(50% - 20px);cursor:pointer;color:#ddd;background:#000;padding:12px 32px;border-radius:4px;border:1px solid #ddd;font-size:1.2rem;opacity:1;transition:300ms opacity ease;}.go239274143 > .central.enabled{opacity:0;}.go1048461253{position:absolute;z-index:4;width:inherit;height:inherit;background:#000;font-family:sans-serif;opacity:1;transition:opacity 1s ease-in;}.go1048461253:not(.faded){pointer-events:none;}.go1048461253.clear{opacity:0;transition:opacity 0.5s ease-in;}.go1048461253.faded{opacity:0.5;transition:opacity 0.5s ease-in;}.go793708432{line-height:1.6;background:var(--focus-bg);border:var(--blog-border-width) solid var(--border-bg);font-size:1.1rem;padding:64px 128px 96px 128px;position:relative;}@media(max-width: 800px){.go793708432{padding:32px 64px 48px 64px;}}@media(max-width: 600px){.go793708432{padding:8px 12px;font-size:1.1rem;border:none;line-height:1.7;}}.go793708432 a{position:relative;}.go793708432 a code{color:unset;}.go793708432 a > span.anchor{position:absolute;top:-96px;}.go793708432 a.new-tab-link::after{display:inline-block;content:'';background-image:url('/icon/ext-link-icon.svg');background-size:13px 13px;height:13px;width:13px;margin-left:2px;}.go793708432 a.anchor-link::after{display:inline-block;content:'';background-image:url('/icon/anchor-icon.svg');background-size:13px 13px;height:13px;width:13px;margin:0 2px 0 4px;}.go793708432 aside{margin:32px 0;padding:8px 32px;border-radius:8px;border:2px dashed #ccc;font-size:1rem;}@media(max-width: 600px){.go793708432 aside{margin:8px 0;padding:0 16px;}}.go793708432 aside p{margin:20px 0;}.go793708432 aside > blockquote{margin:0;}@media(max-width: 600px){.go793708432 aside > figure.tabs{padding:8px 0 12px;}}.go793708432 blockquote{margin:32px 0;border-left:10px solid #ddd;padding-left:30px;}@media(max-width: 600px){.go793708432 blockquote{margin:20px 0;padding-left:20px;}}.go793708432 code{font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;letter-spacing:2px;color:#444;padding:0 2px;}.go793708432 div.small-print{font-size:smaller;}.go793708432 figure{margin:0;}.go793708432 figure.tabs{border:10px solid #333;border-radius:8px;margin:48px 0;position:relative;}@media(max-width: 600px){.go793708432 figure.tabs{margin:32px 0;}}.go793708432 figure.tabs > span.anchor{position:absolute;top:-96px;}.go793708432 h1,.go793708432  h2,.go793708432  h3,.go793708432  h4{font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;font-weight:400;}.go793708432 h1 a,.go793708432  h2 a,.go793708432  h3 a,.go793708432  h4 a{color:#008;}.go793708432 h2{font-size:2.7rem;}@media(max-width: 600px){.go793708432 h2{margin:16px 0 24px;font-size:2rem;}}@media(max-width: 800px){.go793708432 h2{font-size:2.2rem;}}.go793708432 h3{font-size:1.8rem;position:relative;}@media(max-width: 600px){.go793708432 h3{font-size:1.3em;}}@media(max-width: 800px){.go793708432 h3{font-size:1.4em;}}.go793708432 h3 > span.anchor{position:absolute;top:-48px;}.go793708432 p{margin:32px 0;}@media(max-width: 600px){.go793708432 p{margin:16px 0;}}.go793708432 span.cmd{color:#555;background:#ddd;font-family:monospace;letter-spacing:1px;font-size:smaller;padding:2px 4px;}@media(max-width: 600px){.go793708432 span.cmd{user-select:all;}}.go793708432 > span.anchor{position:absolute;top:-48px;}.go793708432 table{padding:8px;border:1px solid #bbb;width:100%;margin:40px 0;}@media(max-width: 600px){.go793708432 table{margin:20px 0;}}.go793708432 table th,.go793708432 table  td{padding:6px;text-align:left;vertical-align:top;font-size:1.1rem;}@media(max-width: 600px){.go793708432 table th,.go793708432 table  td{font-size:1rem;padding:4px 2px;}}.go793708432 > time{position:absolute;right:-10px;top:-50px;width:136px;background:var(--border-bg);text-align:center;color:#555;border-radius:6px 6px 0 0;padding:12px;font-size:1rem;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;}@media(max-width: 600px){.go793708432 > time{top:16px;right:0;border-radius:0 0 0 4px;background:none;font-size:1.1rem;width:unset;margin-top:8px;}}@media(max-width: 600px){.go793708432 ul,.go793708432  ol{padding-left:20px;}}.go793708432 ul + p,.go793708432  ol + p{padding-top:6px;}.go793708432 ul li,.go793708432  ol li{margin:4px 0;}.go2193861445{padding:0;margin:0;list-style:none;}.go4097358152{background:var(--focus-bg);}@keyframes fadein{from{opacity:0;}to{opacity:1;}}.go4097358152 .flexlayout__tabset{animation:fadein 1s;}.go4097358152 .flexlayout__tabset,.go4097358152  .flexlayout__tab{background:white;}.go4097358152 > .flexlayout__layout{background:#444;position:relative;height:340px;}.go4097358152 .flexlayout__tab{border-top:6px solid #444;position:relative;overflow:hidden;}.go4097358152 .flexlayout__tabset_tabbar_outer{background:#222;border-bottom:1px solid #555;}.go4097358152 .flexlayout__tab_button--selected,.go4097358152  .flexlayout__tab_button:hover{background:#444;}.go4097358152 .flexlayout__tab_button_content{user-select:none;font-size:13px;color:#aaa;}.go4097358152 .flexlayout__tab_button--selected .flexlayout__tab_button_content{color:#fff;}.go4097358152 .flexlayout__tab_button:hover:not(.flexlayout__tab_button--selected) .flexlayout__tab_button_content{color:#ddd;}.go4097358152 .flexlayout__splitter_vert,.go4097358152  .flexlayout__splitter_horz{background:#827575;}.go2697092909{width:100%;height:340px;position:relative;}.go4204185124{background:var(--focus-bg);}@keyframes fadein{from{opacity:0;}to{opacity:1;}}.go4204185124 .flexlayout__tabset{animation:fadein 1s;}.go4204185124 .flexlayout__tabset,.go4204185124  .flexlayout__tab{background:white;}.go4204185124 > .flexlayout__layout{background:#444;position:relative;height:300px;}.go4204185124 .flexlayout__tab{border-top:6px solid #444;position:relative;overflow:hidden;}.go4204185124 .flexlayout__tabset_tabbar_outer{background:#222;border-bottom:1px solid #555;}.go4204185124 .flexlayout__tab_button--selected,.go4204185124  .flexlayout__tab_button:hover{background:#444;}.go4204185124 .flexlayout__tab_button_content{user-select:none;font-size:13px;color:#aaa;}.go4204185124 .flexlayout__tab_button--selected .flexlayout__tab_button_content{color:#fff;}.go4204185124 .flexlayout__tab_button:hover:not(.flexlayout__tab_button--selected) .flexlayout__tab_button_content{color:#ddd;}.go4204185124 .flexlayout__splitter_vert,.go4204185124  .flexlayout__splitter_horz{background:#827575;}.go3944991801{width:100%;height:300px;position:relative;}.go1506804081{background:var(--focus-bg);}@keyframes fadein{from{opacity:0;}to{opacity:1;}}.go1506804081 .flexlayout__tabset{animation:fadein 1s;}.go1506804081 .flexlayout__tabset,.go1506804081  .flexlayout__tab{background:white;}.go1506804081 > .flexlayout__layout{background:#444;position:relative;height:400px;}.go1506804081 .flexlayout__tab{border-top:6px solid #444;position:relative;overflow:hidden;}.go1506804081 .flexlayout__tabset_tabbar_outer{background:#222;border-bottom:1px solid #555;}.go1506804081 .flexlayout__tab_button--selected,.go1506804081  .flexlayout__tab_button:hover{background:#444;}.go1506804081 .flexlayout__tab_button_content{user-select:none;font-size:13px;color:#aaa;}.go1506804081 .flexlayout__tab_button--selected .flexlayout__tab_button_content{color:#fff;}.go1506804081 .flexlayout__tab_button:hover:not(.flexlayout__tab_button--selected) .flexlayout__tab_button_content{color:#ddd;}.go1506804081 .flexlayout__splitter_vert,.go1506804081  .flexlayout__splitter_horz{background:#827575;}.go3574057674{width:100%;height:400px;position:relative;}</style><meta name="next-font-preconnect" /><meta name="viewport" content="width=device-width" /><meta charSet="utf-8" /><title>Rogue Markup</title><meta name="next-head-count" content="3" /><link rel="preload" href="/_next/static/css/1d4855e76d9008a12256.css" as="style" /><link rel="stylesheet" href="/_next/static/css/1d4855e76d9008a12256.css" data-n-g /><noscript data-n-css></noscript><script defer noModule src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-ca83bf89e3a39db3e938.js" defer></script><script src="/_next/static/chunks/framework-571220e3661128bb4007.js" defer></script><script src="/_next/static/chunks/main-aba050664ec743567e3e.js" defer></script><script src="/_next/static/chunks/pages/_app-f5d51491505c9fe97be2.js" defer></script><script src="/_next/static/chunks/106-4fad0ab9ee60e77226ad.js" defer></script><script src="/_next/static/chunks/732-574f7fa349ca40add23e.js" defer></script><script src="/_next/static/chunks/657-3e15744c3950165b43d0.js" defer></script><script src="/_next/static/chunks/pages/debug-fa3b55476461f40ac33e.js" defer></script><script src="/_next/static/m9W4cjJpUk0tdlwUvIruB/_buildManifest.js" defer></script><script src="/_next/static/m9W4cjJpUk0tdlwUvIruB/_ssgManifest.js" defer></script></head><body><div id="__next"><nav class="go3338150716 closed"><div class="article-overlay"></div><div class="handle"><div class="icon">&gt;</div></div><section class="go1654252976"><h3><a href="/">Rogue Markup</a></h3><ul><li><a href="/part/1#article-objective" title="Our overall objective">1a objective</a></li><li><a href="/part/1#article-constraints" title="Constraints: tech, game mechanics, setting">1b constraints</a></li><li><a href="/part/1#article-finishing" title="Finishing as a skill">1c finishing</a></li></ul><ul><li><a href="/part/2#article-technology" title="The tech we'll use">2a technology</a></li><li><a href="/part/2#article-tech1" title="JavaScript components">2b tech: js</a></li><li><a href="/part/2#article-tech2" title="Tech related to gameplay">2c tech: ai</a></li><li><a href="/part/2#article-tech3" title="Dev env and in-browser terminal">2d tech: dev</a></li></ul><ul><li><a href="/part/3#article-geomorphs" title="How we use Starship Geomorphs">3a geomorphs</a></li></ul></section></nav><div class="go200039322"></div><div class="go4227718824 closed"></div><section class="go4140030"><header class="title go405958682"><h1 level="1" node="[object Object]">Rogue Markup</h1>
<p>$( game ai | roguelike | web dev )</p></header><main><ol class="go2193861445"><li><article class="go793708432"><span id="article-objective" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-objective"><a>Objective</a></a></h2>
<p>We'll create a <em>Game AI focused</em> roguelike, set in the <a href="https://travellermap.com/?p=-1.329!-23.768!3"><span id="objective--link-traveller-universe" class="anchor"></span>Traveller universe</a>.</p>
<p><em>Why?</em></p>
<p>Because <a href="https://tvtropes.org/pmwiki/pmwiki.php/Main/NonPlayerCharacter"><span id="objective--link-npc" class="anchor"></span>NPC</a> behaviour is more interesting than any particular game.
An environment is needed to make it meaningful, fixed narratives/missions are not.</p>
<p>We'll focus on combining navigation-based behaviours in a flexible manner.
Game AI should be compositional, not forced into a narrative straight-jacket.
As for the environment, it will be driven by thousands of Traveller-based assets.</p>
<figure class="tabs scrollable go4097358152"><span id="objective--tabs--geomorph-301-debug" class="anchor"></span><div class="go2697092909"><div class="go239274143"><div class="top-right">disable</div><div class="central">interact</div></div><div class="go1048461253"></div></div></figure>
<p>Above we've recreated Geomorph 301 (a.k.a. <em>Bridge</em>) from <a href="http://travellerrpgblog.blogspot.com/2018/10/the-starship-geomorphs-book-if-finally.html"><span id="objective--link-starship-geomorphs-2.0" class="anchor"></span>Starship Geomorphs 2.0</a>,
using 8 assets from <a href="http://travellerrpgblog.blogspot.com/2020/08/starship-symbols-book.html"><span id="objective--link-starship-symbols" class="anchor"></span>Starship Symbols</a>.
Green indicates obstacles you can see over, whereas red indicates obstacles which are essentially walls. Together with the white doors and black walls (including the hull), they induce a navigable polygon shown in blue.</p>
<blockquote>
<p>A larger version is <a href="/pics/g-301--bridge.debug.x2.png" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">available</a>.</p>
</blockquote>
<p>A &quot;Starship Geomorph&quot; is a rectangular partial floorplan of a starship, designed to be cut out and glued to other ones.
They were created by Robert Pearce, and distributed as a PDF on his <a href="http://travellerrpgblog.blogspot.com/"><span id="objective--link-blog" class="anchor"></span>blog</a>.
A 2nd version was released in 2020, along with another PDF containing many individual symbols e.g. offices, fuel tanks and bedrooms. Soon afterwards Eric B. Smith transformed them into <a href="http://gurpsland.no-ip.org/geomorphs/"><span id="objective--link-transparent-pngs" class="anchor"></span>transparent PNGs</a>.
The latter 2000+ symbols will form the underlying basis of <em>Rogue Markup</em>.</p></article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-constraints" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-constraints"><a>Constraints</a></a></h2>
<p>This project needs a backbone.
We've chosen the underlying technology, low-level game mechanics, and where events take place.</p>
<h3 level="3"><span id="constraints--technology" class="anchor"></span><a href="#constraints--technology"><a>Technology</a></a></h3>
<p>We begin with the tools we'll use.</p>
<ul>
<li>Use standard web development, rather than HTMLCanvas and <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API"><span id="constraints--link-webgl" class="anchor"></span>WebGL</a>.</li>
<li>Use <a href="https://nextjs.org/"><span id="constraints--link-nextjs" class="anchor"></span>NextJS</a> as our development environment.</li>
<li>Use <a href="https://codesandbox.io"><span id="constraints--link-codesandbox" class="anchor"></span>CodeSandbox</a> to share editable code.</li>
<li>Use <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components"><span id="constraints--link-react-function-components" class="anchor"></span>React function components</a> and CSS-in-JS.</li>
<li>Use <a href="https://www.npmjs.com/package/preact"><span id="constraints--link-preact" class="anchor"></span>Preact</a> (a React alternative) and <a href="https://www.npmjs.com/package/goober"><span id="constraints--link-goober" class="anchor"></span>Goober</a>.</li>
<li>Use <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components"><span id="constraints--link-web-components" class="anchor"></span>Web Components</a> to avoid React renders.</li>
<li>Support both mobile and desktop devices.</li>
</ul>
<p>The name <em>Rogue Markup</em> refers to the video game <a href="https://en.wikipedia.org/wiki/Rogue_(video_game)"><span id="constraints--link-[object-object]" class="anchor"></span><em>Rogue</em></a>, and the HyperText <em>Markup</em> Language (HTML).
Since HTML may be used in many different ways,
we've clarified our particular path above.
As a general principle, we'll use standard website technologies e.g. CSS, SVGs, PNGs and the Web Animations API.</p>
<aside>
<p>Although WebGL permits far richer 3D graphics than CSS,
it leads away from the declarative nature of Markup.
Sticking to central web technologies makes our approach relevant to a far larger audience.
We also want to avoid obsessing over graphics, seeking superior Game AI instead.</p>
</aside>
<p>If you're unfamiliar with CodeSandbox (or similar sites), check out  <a href="https://codesandbox.io/s/rogue-markup-panzoom-yq060?file=/src/panzoom/PanZoom.jsx" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">this example</a>.
If you peruse the files, you'll find the rectangle class <em>Rect</em> and a Geomorph PNG.
Our CodeSandboxes use React, whereas this site uses <em>Preact</em>.
More on that later.</p>
<h3 level="3"><span id="constraints--game-mechanics" class="anchor"></span><a href="#constraints--game-mechanics"><a>Game mechanics</a></a></h3>
<p>Next, gameplay related constraints.</p>
<ul>
<li>Use <a href="http://travellerrpgblog.blogspot.com/2018/10/the-starship-geomorphs-book-if-finally.html"><span id="constraints--link-starship-geomorphs-2.0" class="anchor"></span>Starship Geomorphs 2.0</a> for graphics.</li>
<li>Use a realtime birdseye camera.</li>
<li>Use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API"><span id="constraints--link-web-animations-api" class="anchor"></span>Web Animations API</a>.</li>
<li>Use navigation &amp; raycasting algorithms.</li>
<li>Use an in-browser terminal.</li>
<li>Do not use a Physics engine.</li>
</ul>
<p>We saw <a href="/pics/g-301--bridge.debug.x2.png" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">an example</a> of a Geomorph in the previous article.
By a realtime birdseye camera we just mean a pannable and zoomable SVG.
Using the Web Animations API provides access to the underlying technology driving CSS animations.
As for navigation and raycasting algorithms, this amounts to using a <a href="https://en.wikipedia.org/wiki/Navigation_mesh#:~:text=A%20navigation%20mesh%2C%20or%20navmesh,video%20game%20AI%20in%202000."><span id="constraints--link-navmesh" class="anchor"></span>navmesh</a> and computing ray/geometry collisions efficiently.</p>
<p>In order to develop complex Game AI, we'll use a terminal.
Try entering (or copy-pasting) the commands below.
Mobile users may find copy-pasting easier.</p>

























<table><thead><tr><th>Category</th><th>Examples</th></tr></thead><tbody><tr><td>Nav</td><td><span class="cmd">ls</span>, <span class="cmd">pwd</span>, <span class="cmd">cd /home/test</span>, <span class="cmd">cd ..</span></td></tr><tr><td><a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">CRUD</a></td><td><span class="cmd">echo foo &gt;/home/bar</span>, <span class="cmd">/home/bar</span>, <span class="cmd">cd; rm bar</span></td></tr><tr><td>Out</td><td><span class="cmd">seq 10</span>, <span class="cmd">echo foo{1..5}</span>, <span class="cmd">expr '2**10'</span></td></tr><tr><td>Meta</td><td><span class="cmd">history</span>, <span class="cmd"> declare</span>, <span class="cmd">help</span>, <span class="cmd"> ps</span></td></tr></tbody></table>
  <figure class="tabs scrollable go4204185124"><span id="constraints--tabs--terminal-demo" class="anchor"></span><div class="go3944991801"><div class="go239274143"><div class="top-right">disable</div><div class="central">interact</div></div><div class="go1048461253"></div></div></figure>
<p>As usual, <a href="#command" title="sigkill test">Ctrl+C</a> terminates the &quot;foreground process&quot; e.g. try terminating <span class="cmd">sleep 5</span>.
Pipelines and background processes are also supported.
We'll use terminals to monitor the current state of our Game AI, issue direct commands, and enact long-running behaviour.</p>
<h3 level="3"><span id="constraints--setting" class="anchor"></span><a href="#constraints--setting"><a>Setting</a></a></h3>
<p>Finally we constrain the setting.</p>
<ul>
<li>Events take place in the <a href="https://travellermap.com/?p=-1.329!-23.768!3"><span id="constraints--link-traveller-universe" class="anchor"></span>Traveller Universe</a>, onboard Space vehicles, stations and docks.</li>
<li>Events are inspired by the <a href="https://en.wikipedia.org/wiki/Bardo_Thodol"><span id="constraints--link-bardo-thodol" class="anchor"></span>Bardo Thodol</a>,
<blockquote>
<p>e.g. Ship AIs may recite it to dying <a href="https://wiki.travellerrpg.com/Low_Berth_Rack" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">Low Berth</a> travellers.</p>
</blockquote>
</li>
<li>Events are inspired by <a href="https://en.wikipedia.org/wiki/The_Night_Land"><span id="constraints--link-the-night-land" class="anchor"></span>The Night Land</a>,
<blockquote>
<p>e.g. Earth is assumed lost to Watchers and other &quot;Evil Powers&quot;, actually manifestations from Buddhist hells.</p>
</blockquote>
</li>
</ul>
<p>Traveller is a Futuristic pen-and-paper Role-playing Game, created in the late 70s.
It permits faster than light travel bounded by 6 parsecs per week.
Learn more on the <a href="https://wiki.travellerrpg.com/Jump_Drive"><span id="constraints--link-wiki" class="anchor"></span>wiki</a>, the <a href="https://www.farfuture.net/"><span id="constraints--link-official-site" class="anchor"></span>official site</a> or explore <a href="https://travellermap.com/"><span id="constraints--link-traveller-map" class="anchor"></span>Traveller Map</a>.
It directly motivated Robert Pearce's Starship Geomorphs, and provides considerable depth.</p>

<div class="small-print">
<p><em>The Traveller game in all forms is owned by <a href="https://www.farfuture.net/"><span id="constraints--link-far-future-enterprises" class="anchor"></span>Far Future Enterprises</a>. Copyright © 1977 – 2021 Far Future Enterprises.</em></p>
</div>
<p>We'll leverage two additional sources of inspiration i.e. <em>Liberation Through Hearing in the Intermediate State</em> (Bardo Thodol) and a famous Science Fiction story from 1912 (The Night Land).</p></article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-finishing" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-finishing"><a>Finishing</a></a></h2>
<p>Over time we'll clarify the above constraints, but first we emphasise:</p>
<blockquote>
<p><em>creating a video game is really fucking hard</em>.</p>
</blockquote>
<p>Spelunky's creator suggested <a href="https://makegames.tumblr.com/post/1136623767/finishing-a-game"><span id="finishing--link-three-important-requirements" class="anchor"></span>three important requirements</a> for finishing a game.
We'll address them.</p>
<h3 level="3"><span id="finishing--1.-fun-to-develop" class="anchor"></span><a href="#finishing--1.-fun-to-develop"><a>1. Fun to develop</a></a></h3>
<p><em>Games I want to make</em>. My underlying motivation is the lack of Game AI resources available on the web.
It is hard to discuss the subject without actually building a game, so I chose a setting and game mechanics which felt fun for me.
I am particularly interested in navigation i.e. combining the movement of many characters in a flexible manner.</p>
<h3 level="3"><span id="finishing--2.-the-result" class="anchor"></span><a href="#finishing--2.-the-result"><a>2. The Result</a></a></h3>
<p><em>Games I want to have made</em>. As an end result I want a highly replayable tactical/action game sandbox.
Procedurally generated missions will involve going from A to B and doing C (ever was it so).
Monotony will be overcome via encountered NPC behaviours and e.g. ship building.
Functionally, think <a href="https://www.youtube.com/results?search_query=Teleglitch"><span id="finishing--link-teleglitch" class="anchor"></span>Teleglitch</a> with richer NPCs and the ability to <em>place</em> <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=175359117"><span id="finishing--link-room-modules" class="anchor"></span>room modules</a> when upgrading/docking.
Graphically, see Starship Geomorphs 2.0.</p>
<p>Rogue Markup will be easy to extend.
We'll achieve this via compositional code, escape hatches to CodeSandbox, clear explanations, and <a href="https://github.com/"><span id="finishing--link-github" class="anchor"></span>GitHub</a> comments.</p>
<h3 level="3"><span id="finishing--3.-experience" class="anchor"></span><a href="#finishing--3.-experience"><a>3. Experience</a></a></h3>
<p><em>Games I’m good at making</em>. I work as a web developer, using React and CSS-in-JS on a daily basis.
I have a <a href="https://dblp.org/pid/81/8748.html"><span id="finishing--link-strong-background" class="anchor"></span>strong background</a> in Theoretical Computer Science,
so won't confuse Game AI with AI, nor fall prey to the Deep Learning hype.
I have also created similar game mechanics <em>many</em> times over the years.
Here's hoping my chain of unfinished projects is coming to a close!</p></article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-technology" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-technology"><a>Constraints</a></a></h2>
<p>This project needs a backbone.
We've chosen the underlying technology, low-level game mechanics, and where events take place.</p>
<h3 level="3"><span id="technology--technology" class="anchor"></span><a href="#technology--technology"><a>Technology</a></a></h3>
<p>We begin with the tools we'll use.</p>
<ul>
<li>Use standard web development, rather than HTMLCanvas and <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API"><span id="technology--link-webgl" class="anchor"></span>WebGL</a>.</li>
<li>Use <a href="https://nextjs.org/"><span id="technology--link-nextjs" class="anchor"></span>NextJS</a> as our development environment.</li>
<li>Use <a href="https://codesandbox.io"><span id="technology--link-codesandbox" class="anchor"></span>CodeSandbox</a> to share editable code.</li>
<li>Use <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components"><span id="technology--link-react-function-components" class="anchor"></span>React function components</a> and CSS-in-JS.</li>
<li>Use <a href="https://www.npmjs.com/package/preact"><span id="technology--link-preact" class="anchor"></span>Preact</a> (a React alternative) and <a href="https://www.npmjs.com/package/goober"><span id="technology--link-goober" class="anchor"></span>Goober</a>.</li>
<li>Use <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components"><span id="technology--link-web-components" class="anchor"></span>Web Components</a> to avoid React renders.</li>
<li>Support both mobile and desktop devices.</li>
</ul>
<p>The name <em>Rogue Markup</em> refers to the video game <a href="https://en.wikipedia.org/wiki/Rogue_(video_game)"><span id="technology--link-[object-object]" class="anchor"></span><em>Rogue</em></a>, and the HyperText <em>Markup</em> Language (HTML).
Since HTML may be used in many different ways,
we've clarified our particular path above.
As a general principle, we'll use standard website technologies e.g. CSS, SVGs, PNGs and the Web Animations API.</p>
<aside>
<p>Although WebGL permits far richer 3D graphics than CSS,
it leads away from the declarative nature of Markup.
Sticking to central web technologies makes our approach relevant to a far larger audience.
We also want to avoid obsessing over graphics, seeking superior Game AI instead.</p>
</aside>
<p>If you're unfamiliar with CodeSandbox (or similar sites), check out  <a href="https://codesandbox.io/s/rogue-markup-panzoom-yq060?file=/src/panzoom/PanZoom.jsx" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">this example</a>.
If you peruse the files, you'll find the rectangle class <em>Rect</em> and a Geomorph PNG.
Our CodeSandboxes use React, whereas this site uses <em>Preact</em>.
More on that later.</p>
<h3 level="3"><span id="technology--game-mechanics" class="anchor"></span><a href="#technology--game-mechanics"><a>Game mechanics</a></a></h3>
<p>Next, gameplay related constraints.</p>
<ul>
<li>Use <a href="http://travellerrpgblog.blogspot.com/2018/10/the-starship-geomorphs-book-if-finally.html"><span id="technology--link-starship-geomorphs-2.0" class="anchor"></span>Starship Geomorphs 2.0</a> for graphics.</li>
<li>Use a realtime birdseye camera.</li>
<li>Use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API"><span id="technology--link-web-animations-api" class="anchor"></span>Web Animations API</a>.</li>
<li>Use navigation &amp; raycasting algorithms.</li>
<li>Use an in-browser terminal.</li>
<li>Do not use a Physics engine.</li>
</ul>
<p>We saw <a href="/pics/g-301--bridge.debug.x2.png" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">an example</a> of a Geomorph in the previous article.
By a realtime birdseye camera we just mean a pannable and zoomable SVG.
Using the Web Animations API provides access to the underlying technology driving CSS animations.
As for navigation and raycasting algorithms, this amounts to using a <a href="https://en.wikipedia.org/wiki/Navigation_mesh#:~:text=A%20navigation%20mesh%2C%20or%20navmesh,video%20game%20AI%20in%202000."><span id="technology--link-navmesh" class="anchor"></span>navmesh</a> and computing ray/geometry collisions efficiently.</p>
<p>In order to develop complex Game AI, we'll use a terminal.
Try entering (or copy-pasting) the commands below.
Mobile users may find copy-pasting easier.</p>

























<table><thead><tr><th>Category</th><th>Examples</th></tr></thead><tbody><tr><td>Nav</td><td><span class="cmd">ls</span>, <span class="cmd">pwd</span>, <span class="cmd">cd /home/test</span>, <span class="cmd">cd ..</span></td></tr><tr><td><a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">CRUD</a></td><td><span class="cmd">echo foo &gt;/home/bar</span>, <span class="cmd">/home/bar</span>, <span class="cmd">cd; rm bar</span></td></tr><tr><td>Out</td><td><span class="cmd">seq 10</span>, <span class="cmd">echo foo{1..5}</span>, <span class="cmd">expr '2**10'</span></td></tr><tr><td>Meta</td><td><span class="cmd">history</span>, <span class="cmd"> declare</span>, <span class="cmd">help</span>, <span class="cmd"> ps</span></td></tr></tbody></table>
  <figure class="tabs scrollable go4204185124"><span id="technology--tabs--terminal-demo" class="anchor"></span><div class="go3944991801"><div class="go239274143"><div class="top-right">disable</div><div class="central">interact</div></div><div class="go1048461253"></div></div></figure>
<p>As usual, <a href="#command" title="sigkill test">Ctrl+C</a> terminates the &quot;foreground process&quot; e.g. try terminating <span class="cmd">sleep 5</span>.
Pipelines and background processes are also supported.
We'll use terminals to monitor the current state of our Game AI, issue direct commands, and enact long-running behaviour.</p>
<h3 level="3"><span id="technology--setting" class="anchor"></span><a href="#technology--setting"><a>Setting</a></a></h3>
<p>Finally we constrain the setting.</p>
<ul>
<li>Events take place in the <a href="https://travellermap.com/?p=-1.329!-23.768!3"><span id="technology--link-traveller-universe" class="anchor"></span>Traveller Universe</a>, onboard Space vehicles, stations and docks.</li>
<li>Events are inspired by the <a href="https://en.wikipedia.org/wiki/Bardo_Thodol"><span id="technology--link-bardo-thodol" class="anchor"></span>Bardo Thodol</a>,
<blockquote>
<p>e.g. Ship AIs may recite it to dying <a href="https://wiki.travellerrpg.com/Low_Berth_Rack" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">Low Berth</a> travellers.</p>
</blockquote>
</li>
<li>Events are inspired by <a href="https://en.wikipedia.org/wiki/The_Night_Land"><span id="technology--link-the-night-land" class="anchor"></span>The Night Land</a>,
<blockquote>
<p>e.g. Earth is assumed lost to Watchers and other &quot;Evil Powers&quot;, actually manifestations from Buddhist hells.</p>
</blockquote>
</li>
</ul>
<p>Traveller is a Futuristic pen-and-paper Role-playing Game, created in the late 70s.
It permits faster than light travel bounded by 6 parsecs per week.
Learn more on the <a href="https://wiki.travellerrpg.com/Jump_Drive"><span id="technology--link-wiki" class="anchor"></span>wiki</a>, the <a href="https://www.farfuture.net/"><span id="technology--link-official-site" class="anchor"></span>official site</a> or explore <a href="https://travellermap.com/"><span id="technology--link-traveller-map" class="anchor"></span>Traveller Map</a>.
It directly motivated Robert Pearce's Starship Geomorphs, and provides considerable depth.</p>

<div class="small-print">
<p><em>The Traveller game in all forms is owned by <a href="https://www.farfuture.net/"><span id="technology--link-far-future-enterprises" class="anchor"></span>Far Future Enterprises</a>. Copyright © 1977 – 2021 Far Future Enterprises.</em></p>
</div>
<p>We'll leverage two additional sources of inspiration i.e. <em>Liberation Through Hearing in the Intermediate State</em> (Bardo Thodol) and a famous Science Fiction story from 1912 (The Night Land).</p></article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-tech1" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-tech1"><a>Tech (ai)</a></a></h2>
<p>So far we've described our objective, constrained our approach, and listed the technologies we'll use.
Having discussed <a href="2#tech1--react-and-preact" title="@anchor" class="anchor-link"><span id="tech1--link-javascript-components" class="anchor"></span>JavaScript components</a>,
we turn to Game AI.</p>
<h3 level="3"><span id="tech1--overview" class="anchor"></span><a href="#tech1--overview"><a>Overview</a></a></h3>
<p><em>Rogue Markup</em> will present a birdseye viewpoint of the interior of starships.
The <a href="https://wiki.travellerrpg.com/Crew" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">crew</a> will have tasks e.g. manning the bridge, patrolling the decks, monitoring <a href="https://wiki.travellerrpg.com/Low_Passage" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">low berths</a>.
These behaviours will be constrained by e.g. sleep patterns, the behaviour of others, and hardware failures.
So how do video games implement these behaviours?</p>
<p>There are three standard systems:</p>
<blockquote>
<p><strong>Navigation</strong>: <em>planning e.g. route from A to B.</em></p>
<p><strong>Animation</strong>: <em>realism (e.g. limb movement) and visual cues.</em></p>
<p><strong>Physics</strong>: collision detection, force-driven rigid bodies, raycasting.</p>
</blockquote>
<p>Navigation is of central importance and will be discussed shortly.
Concerning animation, we're definitely not going to obsess over realism.
Nevertheless we'll need visual cues to indicate NPC actions,
and a <em>sense of flow</em> via interdependent concurrent animations.
As for a physics engine, we <a href="1#constraints--game-mechanics" title="@anchor" class="anchor-link"><span id="tech1--link-already-mentioned" class="anchor"></span>already mentioned</a> we won't be using one. Instead:</p>
<ul>
<li>Collision detection will be handled at a higher level (navigation).</li>
<li>The Web Animations API will replace force-driven movement.</li>
<li>We'll write our own raycaster e.g. for line-of-sight detection.</li>
</ul>
<p>It is worth discussing Navigation and Raycasting in more detail.</p>
<h3 level="3"><span id="tech1--navigation" class="anchor"></span><a href="#tech1--navigation"><a>Navigation</a></a></h3>


<figure class="tabs scrollable go1506804081"><span id="tech1--tabs--nav-demo" class="anchor"></span><div class="go3574057674"><div class="go239274143"><div class="top-right">disable</div><div class="central">interact</div></div><div class="go1048461253"></div></div></figure>
<h3 level="3"><span id="tech1--raycasting" class="anchor"></span><a href="#tech1--raycasting"><a>Raycasting</a></a></h3>
<p>...</p></article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-tech2" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-tech2"><a>Tech (ai)</a></a></h2>
<p>So far we've described our objective, constrained our approach, and listed the technologies we'll use.
Having discussed <a href="2#tech1--react-and-preact" title="@anchor" class="anchor-link"><span id="tech2--link-javascript-components" class="anchor"></span>JavaScript components</a>,
we turn to Game AI.</p>
<h3 level="3"><span id="tech2--overview" class="anchor"></span><a href="#tech2--overview"><a>Overview</a></a></h3>
<p><em>Rogue Markup</em> will present a birdseye viewpoint of the interior of starships.
The <a href="https://wiki.travellerrpg.com/Crew" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">crew</a> will have tasks e.g. manning the bridge, patrolling the decks, monitoring <a href="https://wiki.travellerrpg.com/Low_Passage" title="@new-tab" target="_blank" rel="noopener" class="new-tab-link">low berths</a>.
These behaviours will be constrained by e.g. sleep patterns, the behaviour of others, and hardware failures.
So how do video games implement these behaviours?</p>
<p>There are three standard systems:</p>
<blockquote>
<p><strong>Navigation</strong>: <em>planning e.g. route from A to B.</em></p>
<p><strong>Animation</strong>: <em>realism (e.g. limb movement) and visual cues.</em></p>
<p><strong>Physics</strong>: collision detection, force-driven rigid bodies, raycasting.</p>
</blockquote>
<p>Navigation is of central importance and will be discussed shortly.
Concerning animation, we're definitely not going to obsess over realism.
Nevertheless we'll need visual cues to indicate NPC actions,
and a <em>sense of flow</em> via interdependent concurrent animations.
As for a physics engine, we <a href="1#constraints--game-mechanics" title="@anchor" class="anchor-link"><span id="tech2--link-already-mentioned" class="anchor"></span>already mentioned</a> we won't be using one. Instead:</p>
<ul>
<li>Collision detection will be handled at a higher level (navigation).</li>
<li>The Web Animations API will replace force-driven movement.</li>
<li>We'll write our own raycaster e.g. for line-of-sight detection.</li>
</ul>
<p>It is worth discussing Navigation and Raycasting in more detail.</p>
<h3 level="3"><span id="tech2--navigation" class="anchor"></span><a href="#tech2--navigation"><a>Navigation</a></a></h3>


<figure class="tabs scrollable go1506804081"><span id="tech2--tabs--nav-demo" class="anchor"></span><div class="go3574057674"><div class="go239274143"><div class="top-right">disable</div><div class="central">interact</div></div><div class="go1048461253"></div></div></figure>
<h3 level="3"><span id="tech2--raycasting" class="anchor"></span><a href="#tech2--raycasting"><a>Raycasting</a></a></h3>
<p>...</p></article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-tech3" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-tech3"><a>Tech (dev)</a></a></h2>
<h3 level="3"><span id="tech3--static-analysis" class="anchor"></span><a href="#tech3--static-analysis"><a>Static Analysis</a></a></h3>
<ul>
<li>Typescript via JSDoc, referring to CodeSandbox.</li>
</ul>
<h3 level="3"><span id="tech3--runtime-analysis" class="anchor"></span><a href="#tech3--runtime-analysis"><a>Runtime Analysis</a></a></h3>
<ul>
<li>Terminal + Game AI</li>
</ul>
<h3 level="3"><span id="tech3--comments" class="anchor"></span><a href="#tech3--comments"><a>Comments</a></a></h3>
<ul>
<li>Display GitHub comments from Issue (build-time)</li>
<li>Can use anonymous credits to get recent</li>
</ul>
<br />
<br />
</article><hr class="go1763247448" /></li><li><article class="go793708432"><span id="article-geomorphs" class="anchor"></span><time dateTime="2021-07-19">19th July 2021</time><h2 level="2"><a href="#article-geomorphs"><a>Geomorphs</a></a></h2>
<h3 level="3"><span id="geomorphs--filesystem-structure" class="anchor"></span><a href="#geomorphs--filesystem-structure"><a>Filesystem structure</a></a></h3>
<p>media</p>
<ul>
<li>Starship Geomorphs 2.0.pdf (Original source)</li>
<li>Starship Symbols.pdf (Original source)</li>
<li>Geomorphs.zip (Transparent PNGs obtained from Starship Geomorphs 2.0)</li>
<li>SymbolsHighRes.zip (Transparent PNGs obtained from Starship Symbols)</li>
</ul>
<p>media/Geomorph</p>
<ul>
<li>PNGs of lower quality (relatively).</li>
<li>Extracted from &quot;Starship Geomorphs 2.0.pdf&quot; by ...</li>
</ul>
<p>media/Symbols</p>
<ul>
<li>PNGs of higher quality.</li>
<li>Extracted from &quot;Starship Symbols.pdf&quot; by ...</li>
</ul>
<p>media/scripts</p>
<ul>
<li>ts-node scripts launched via npm scripts</li>
<li>Directories generated by scripts</li>
<li>media/geomorph-edge (Edge Geomorphs)</li>
<li>media/symbol-bridge</li>
<li>media/symbol-dock-small-craft</li>
<li>media/symbol-staterooms</li>
<li>media/symbol-lounge</li>
<li>media/symbol-root</li>
</ul>
<p>public/png</p>
<ul>
<li>PNGs from media/symbol-* with labels removed</li>
</ul>
<p>public/svg</p>
<ul>
<li>Enriched symbols</li>
<li>Geomorph hulls</li>
</ul>
<figure class="tabs scrollable go1506804081"><span id class="anchor"></span><div class="go3574057674"><div class="go239274143"><div class="top-right">disable</div><div class="central">interact</div></div><div class="go1048461253"></div></div></figure></article><hr class="go1763247448" /></li></ol></main></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/debug","query":{},"buildId":"m9W4cjJpUk0tdlwUvIruB","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>